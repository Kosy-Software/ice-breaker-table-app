(()=>{"use strict";(()=>{function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function a(e){return 0===Object.keys(e).length}function l(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function u(e){let t;return l(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(l(t,n))}function p(e,t,n,s){if(e){const o=f(e,t,n,s);return e[0](o)}}function f(e,t,n,s){return e[1]&&s?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](s(t))):n.ctx}function m(e,t,n,s){if(e[2]&&s){const o=e[2](s(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|o[s];return e}return t.dirty|o}return t.dirty}function h(e,t,n,s,o,i){if(o){const c=f(t,n,s,i);e.p(c,o)}}function $(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function g(e){return null==e?"":e}new Set;let y,k=!1;function b(e,t){e.appendChild(t)}function v(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode.removeChild(e)}function w(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function C(e){return document.createTextNode(e)}function P(){return C(" ")}function I(){return C("")}function M(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function Q(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function U(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function N(e,t){e.value=null==t?"":t}function _(e){y=e}function A(){if(!y)throw new Error("Function called outside component initialization");return y}function E(){const e=A();return(t,n,{cancelable:s=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,s,t),o}(t,n,{cancelable:s});return o.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}function H(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}new Map;const T=[],R=[],j=[],O=[],S=Promise.resolve();let W=!1;function B(e){j.push(e)}const L=new Set;let K=0;function z(){const e=y;do{for(;K<T.length;){const e=T[K];K++,_(e),D(e.$$)}for(_(null),T.length=0,K=0;R.length;)R.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];L.has(t)||(L.add(t),t())}j.length=0}while(T.length);for(;O.length;)O.pop()();W=!1,L.clear(),_(e)}function D(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const F=new Set;let G,V;function Y(){G={r:0,c:[],p:G}}function J(){G.r||s(G.c),G=G.p}function X(e,t){e&&e.i&&(F.delete(e),e.i(t))}function Z(e,t,n,s){if(e&&e.o){if(F.has(e))return;F.add(e),G.c.push((()=>{F.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}else s&&s()}function ee(e,t){const n=t.token={};function s(e,s,o,i){if(t.token!==n)return;t.resolved=i;let c=t.ctx;void 0!==o&&(c=c.slice(),c[o]=i);const r=e&&(t.current=e)(c);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(Y(),Z(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),J())})):t.block.d(1),r.c(),X(r,1),r.m(t.mount(),t.anchor),a=!0),t.block=r,t.blocks&&(t.blocks[s]=r),a&&z()}if((o=e)&&"object"==typeof o&&"function"==typeof o.then){const n=A();if(e.then((e=>{_(n),s(t.then,1,t.value,e),_(null)}),(e=>{if(_(n),s(t.catch,2,t.error,e),_(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var o}function te(e,t,n){const s=t.slice(),{resolved:o}=e;e.current===e.then&&(s[e.value]=o),e.current===e.catch&&(s[e.error]=o),e.block.p(s,n)}function ne(e,t){Z(e,1,1,(()=>{t.delete(e.key)}))}function se(e){e&&e.c()}function oe(e,n,i,c){const{fragment:r,on_mount:a,on_destroy:l,after_update:u}=e.$$;r&&r.m(n,i),c||B((()=>{const n=a.map(t).filter(o);l?l.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(B)}function ie(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ce(t,o,i,c,r,a,l,u=[-1]){const d=y;_(t);const p=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||d.$$.root};l&&l(p.root);let f=!1;if(p.ctx=i?i(t,o.props||{},((e,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&r(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),f&&function(e,t){-1===e.$$.dirty[0]&&(T.push(e),W||(W=!0,S.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),f=!0,s(p.before_update),p.fragment=!!c&&c(p.ctx),o.target){if(o.hydrate){k=!0;const e=(m=o.target,Array.from(m.childNodes));p.fragment&&p.fragment.l(e),e.forEach(x)}else p.fragment&&p.fragment.c();o.intro&&X(t.$$.fragment),oe(t,o.target,o.anchor,o.customElement),k=!1,z()}var m;_(d)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(V=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(o);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){ie(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!a(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class re{$destroy(){ie(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!a(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class ae{constructor(e){this.kosyClient=window.parent,this.latestMessageNumber=0,this.kosyApp=e}dictionaryToArray(e){let t=[];for(const n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t}startApp(){return this.initialInfoPromise=new Promise(((e,t)=>{window.addEventListener("message",(t=>{let n=t.data;switch(n.type){case"receive-initial-info":this.latestMessageNumber=n.latestMessageNumber,this.clients=n.payload.clients,this.hostClientUuid=n.payload.initializerClientUuid,this.log("Resolving initial info promise with: ",n.payload),e(n.payload);break;case"set-client-info":{let e=n.clients,t=n.hostClientUuid;this.initialInfoPromise.then((n=>{let s=this.dictionaryToArray(e).filter((e=>!this.clients[e[0]])),o=this.dictionaryToArray(this.clients).filter((t=>!e[t[0]])),i=this.latestMessageNumber;this.hostClientUuid!==t&&this._relayMessageToClients(n,{type:"_host-has-changed",clientUuid:t},++i),s.forEach((e=>this._relayMessageToClients(n,{type:"_client-has-joined",clientInfo:e[1]},++i))),o.forEach((e=>this._relayMessageToClients(n,{type:"_client-has-left",clientUuid:e[0]},++i))),this.clients=e,this.hostClientUuid=t}));break}case"get-app-state":{let e=n.clientUuids;this.log("Get app state received -> sending app state");const t=this.kosyApp.onRequestState();this._sendMessageToKosy({type:"receive-app-state",state:t,clientUuids:e,latestMessageNumber:this.latestMessageNumber});break}case"set-app-state":this.latestMessageNumber=n.latestMessageNumber;let t=n.state;this.initialInfoPromise.then((()=>{this.log("Received app state from Kosy -> setting app state"),this.kosyApp.onProvideState(t)}));break;case"receive-message-as-host":this._handleReceiveMessageAsHost(n);break;case"receive-message-as-client":this._handleReceiveMessageAsClient(n)}})),this._sendMessageToKosy({type:"ready-and-listening"})})),this.initialInfoPromise}stopApp(){this._sendMessageToKosy({type:"stop-app"})}relayMessage(e){this.log("Relaying client message to host: ",e),this._sendMessageToKosy({type:"relay-message-to-host",message:e})}_relayMessageToClients(e,t,n){this.log("Relaying host to client message: ",t),this._sendMessageToKosy({type:"relay-message-to-clients",sentByClientUuid:e.currentClientUuid,message:t,messageNumber:n})}_sendMessageToKosy(e){this.kosyClient.postMessage(e,"*")}_handleReceiveMessageAsClientRecursive(e,t,n){var s,o,i,c,r,a;if(this.latestMessageNumber===e.messageNumber-1){switch(e.message.type){case"_host-has-changed":{let t=e.message.clientUuid;this.hostClientUuid=t,null===(o=(s=this.kosyApp).onHostHasChanged)||void 0===o||o.call(s,t);break}case"_client-has-joined":{let t=e.message.clientInfo;this.clients[t.clientUuid]=t,null===(c=(i=this.kosyApp).onClientHasJoined)||void 0===c||c.call(i,t);break}case"_client-has-left":{let t=e.message.clientUuid;this.clients[t]=null,null===(a=(r=this.kosyApp).onClientHasLeft)||void 0===a||a.call(r,t);break}default:this.kosyApp.onReceiveMessageAsClient(e.message)}this.latestMessageNumber=e.messageNumber}else n<50&&this.latestMessageNumber<e.messageNumber?setTimeout((()=>this._handleReceiveMessageAsClientRecursive(e,t,n+1)),100):(this.log("Timeout on processing message as client: ",e.message),this.log("Wait for Kosy to fix this mess..."))}_handleReceiveMessageAsClient(e){this.initialInfoPromise.then((t=>{this.log("Received message as client, processing: ",e.message),this._handleReceiveMessageAsClientRecursive(e,t,0)}))}_handleReceiveMessageAsHost(e){this.initialInfoPromise.then((t=>{this.log("Trying to handle message as host");const n=this.kosyApp.onReceiveMessageAsHost(e.message);n&&this._relayMessageToClients(t,n,this.latestMessageNumber+1)}))}log(...e){"1"===localStorage.getItem("debug-mode")&&console.log("From kosy-app-api: ",...e)}}const le=[];function ue(t,n=e){let s;const o=new Set;function c(e){if(i(t,e)&&(t=e,s)){const e=!le.length;for(const e of o)e[1](),le.push(e,t);if(e){for(let e=0;e<le.length;e+=2)le[e][0](le[e+1]);le.length=0}}}return{set:c,update:function(e){c(e(t))},subscribe:function(i,r=e){const a=[i,r];return o.add(a),1===o.size&&(s=n(c)||e),i(t),()=>{o.delete(a),0===o.size&&(s(),s=null)}}}}const de=ue({type:"loading"});var pe,fe=new Uint8Array(16);function me(){if(!pe&&!(pe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(fe)}const he=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,$e=function(e){return"string"==typeof e&&he.test(e)};for(var ge=[],ye=0;ye<256;++ye)ge.push((ye+256).toString(16).substr(1));const ke=function(e,t,n){var s=(e=e||{}).random||(e.rng||me)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=s[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ge[e[t+0]]+ge[e[t+1]]+ge[e[t+2]]+ge[e[t+3]]+"-"+ge[e[t+4]]+ge[e[t+5]]+"-"+ge[e[t+6]]+ge[e[t+7]]+"-"+ge[e[t+8]]+ge[e[t+9]]+"-"+ge[e[t+10]]+ge[e[t+11]]+ge[e[t+12]]+ge[e[t+13]]+ge[e[t+14]]+ge[e[t+15]]).toLowerCase();if(!$e(n))throw TypeError("Stringified UUID is invalid");return n}(s)};class be{constructor(e,t){this.text=e,this.imageId=t}}class ve{constructor(){this.id=ke(),this.name="",this.icon="",this.isPublic=!1,this.orderNumber=-1,this.questions=[]}}const xe=[{id:"1",icon:"far fa-face-smile",orderNumber:1,isPublic:!0,name:"Fun Icebreaker Questions",questions:[new be("What is Kosy?"),new be("Who is Kosy?"),new be("Why is Kosy?"),new be("When is Kosy?")]},{id:"2",icon:"far fa-comment-dots",orderNumber:2,isPublic:!0,name:"Icebreaker Questions for Work",questions:[new be("Why do birds, suddenly appear?"),new be("Why did the chicken cross the road?"),new be("How many superheroes took their name and inspiration from the animal kingdom?")]},{id:"3",icon:"far fa-face-surprise",orderNumber:3,isPublic:!0,name:"Weird Icebreaker Questions",questions:[new be("What are the main advantages of using typescript over javascript?"),new be("What are the main disadvantages of using typescript over javascript?")]},{id:"4",icon:"far fa-sun",orderNumber:4,isPublic:!0,name:"Holiday Icebreaker Questions",questions:[new be("What is the most Belgian thing you can think of?"),new be("What kinds of Belgian beer can you think of?")]},{id:"5",icon:"far fa-calendar",orderNumber:5,isPublic:!0,name:"Best Questions for Meetings",questions:[new be("What is the most Belgian thing you can think of?"),new be("What kinds of Belgian beer can you think of?")]},{id:"6",icon:"far fa-face-smile",orderNumber:6,isPublic:!0,name:"Fun Team Icebreaker Questions",questions:[new be("What is the most Belgian thing you can think of?"),new be("What kinds of Belgian beer can you think of?")]},{id:"7",icon:"far fa-comments",orderNumber:7,isPublic:!0,name:"Community Building Questions",questions:[new be("What is the most Belgian thing you can think of?"),new be("What kinds of Belgian beer can you think of?")]},{id:"8",icon:"fas fa-fire-flame-curved",orderNumber:8,isPublic:!0,name:"Inappropriate Icebreakers",questions:[new be("What is the most Belgian thing you can think of?"),new be("What kinds of Belgian beer can you think of?")]}],we=xe,qe=ue({clients:{},appHostClientUuid:"",kosyHostClientUuid:"",currentClientUuid:""}),Ce=ue(null),Pe=function(t,n,i=(()=>!0)){if(!t)throw new Error("You should provide a store to derive from.");if(!n||"function"!=typeof n)throw new Error(`The provided promiseFunction was not a function. It was ${typeof n}.`);if(i&&"function"!=typeof i)throw new Error(`The provided shouldRefreshPromise was not a function. It was ${typeof i}.`);let c;const r=function(t,n,i){const c=!Array.isArray(t),r=c?[t]:t,a=n.length<2;return u=t=>{let i=!1;const u=[];let d=0,p=e;const f=()=>{if(d)return;p();const s=n(c?u[0]:u,t);a?t(s):p=o(s)?s:e},m=r.map(((e,t)=>l(e,(e=>{u[t]=e,d&=~(1<<t),i&&f()}),(()=>{d|=1<<t}))));return i=!0,f(),function(){s(m),p()}},{subscribe:ue(i,u).subscribe};var u}(t,((e,s)=>{const o=a(),r=o=>{i(o,e,c)&&(e&&t.isPromisable?e.then((e=>s(n(e)))):s(n(e)),c=u(t))};o?o.then(r).catch(r):r()})),a=()=>u(r);return r.isPromisable=!0,r}(de,(async e=>{switch(null==e?void 0:e.type){case"playingGame":case"editingQuestionPack":var t=u(Ce);if((null==t?void 0:t.id)===e.questionPackId)return Promise.resolve(t);var n=await new Promise(((t,n)=>{return t((s=e.questionPackId,xe.filter((e=>e.id===s))[0]));var s}));return Ce.set(n),n;default:return Promise.resolve(null)}}),((e,t,n)=>!0));function Ie(e){let t,n,o,i;const c=e[5].default,r=p(c,e,e[4],null);return{c(){t=q("button"),r&&r.c(),Q(t,"class",e[1]),t.disabled=e[0]},m(s,c){v(s,t,c),r&&r.m(t,null),n=!0,o||(i=[M(t,"click",e[6]),M(t,"dblclick",e[7]),M(t,"focus",e[8])],o=!0)},p(e,[s]){r&&r.p&&(!n||16&s)&&h(r,c,e,e[4],n?m(c,e[4],s,null):$(e[4]),null),(!n||2&s)&&Q(t,"class",e[1]),(!n||1&s)&&(t.disabled=e[0])},i(e){n||(X(r,e),n=!0)},o(e){Z(r,e),n=!1},d(e){e&&x(t),r&&r.d(e),o=!1,s(i)}}}function Me(e,t,n){let{$$slots:s={},$$scope:o}=t,{size:i="regular"}=t,{importance:c}=t,{disabled:r=!1}=t,a="";return e.$$set=e=>{"size"in e&&n(2,i=e.size),"importance"in e&&n(3,c=e.importance),"disabled"in e&&n(0,r=e.disabled),"$$scope"in e&&n(4,o=e.$$scope)},e.$$.update=()=>{if(12&e.$$.dirty){let e=["re-button","size-"+i];c&&e.push("importance-"+c),n(1,a=e.join(" "))}},[r,a,i,c,o,s,function(t){H.call(this,e,t)},function(t){H.call(this,e,t)},function(t){H.call(this,e,t)}]}const Qe=class extends re{constructor(e){super(),ce(this,e,Me,Ie,i,{size:2,importance:3,disabled:0})}};function Ue(e){let t,n;const s=e[1].default,o=p(s,e,e[0],null);return{c(){t=q("div"),o&&o.c(),Q(t,"class","re-button-group svelte-1omxfsn")},m(e,s){v(e,t,s),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&(!n||1&t)&&h(o,s,e,e[0],n?m(s,e[0],t,null):$(e[0]),null)},i(e){n||(X(o,e),n=!0)},o(e){Z(o,e),n=!1},d(e){e&&x(t),o&&o.d(e)}}}function Ne(e,t,n){let{$$slots:s={},$$scope:o}=t;return e.$$set=e=>{"$$scope"in e&&n(0,o=e.$$scope)},[o,s]}const _e=class extends re{constructor(e){super(),ce(this,e,Ne,Ue,i,{})}};function Ae(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ee(e){let t,n,s,o,i,c,a;const l=[Te,He],u=[];function d(e,t){return 0===e[0].currentQuestionIdx||e[0].currentQuestionIdx?1:0}t=d(e),n=u[t]=l[t](e);let p=e[2].appHostClientUuid!==e[2].currentClientUuid&&ze(e);return{c(){n.c(),s=P(),p&&p.c(),o=P(),i=q("img"),Q(i,"id","drums"),r(i.src,c="assets/drum.svg")||Q(i,"src","assets/drum.svg"),Q(i,"alt","Drum icon"),Q(i,"class","svelte-1mjscq6")},m(e,n){u[t].m(e,n),v(e,s,n),p&&p.m(e,n),v(e,o,n),v(e,i,n),a=!0},p(e,i){let c=t;t=d(e),t===c?u[t].p(e,i):(Y(),Z(u[c],1,1,(()=>{u[c]=null})),J(),n=u[t],n?n.p(e,i):(n=u[t]=l[t](e),n.c()),X(n,1),n.m(s.parentNode,s)),e[2].appHostClientUuid!==e[2].currentClientUuid?p?p.p(e,i):(p=ze(e),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null)},i(e){a||(X(n),a=!0)},o(e){Z(n),a=!1},d(e){u[t].d(e),e&&x(s),p&&p.d(e),e&&x(o),e&&x(i)}}}function He(e){let t,n,s,o,i,c=e[13].questions[e[0].currentQuestionIdx]+"",r=e[2].appHostClientUuid===e[2].currentClientUuid&&Re(e);return{c(){t=q("h1"),n=C(c),s=P(),r&&r.c(),o=I(),Q(t,"class","svelte-1mjscq6")},m(e,c){v(e,t,c),b(t,n),v(e,s,c),r&&r.m(e,c),v(e,o,c),i=!0},p(e,t){(!i||3&t)&&c!==(c=e[13].questions[e[0].currentQuestionIdx]+"")&&U(n,c),e[2].appHostClientUuid===e[2].currentClientUuid?r?(r.p(e,t),4&t&&X(r,1)):(r=Re(e),r.c(),X(r,1),r.m(o.parentNode,o)):r&&(Y(),Z(r,1,1,(()=>{r=null})),J())},i(e){i||(X(r),i=!0)},o(e){Z(r),i=!1},d(e){e&&x(t),e&&x(s),r&&r.d(e),e&&x(o)}}}function Te(e){let t,n,s,o,i=e[2].appHostClientUuid===e[2].currentClientUuid&&Se(e);return{c(){t=q("h1"),t.textContent="Wow! You've answered all of the questions!",n=P(),i&&i.c(),s=I(),Q(t,"class","svelte-1mjscq6")},m(e,c){v(e,t,c),v(e,n,c),i&&i.m(e,c),v(e,s,c),o=!0},p(e,t){e[2].appHostClientUuid===e[2].currentClientUuid?i?(i.p(e,t),4&t&&X(i,1)):(i=Se(e),i.c(),X(i,1),i.m(s.parentNode,s)):i&&(Y(),Z(i,1,1,(()=>{i=null})),J())},i(e){o||(X(i),o=!0)},o(e){Z(i),o=!1},d(e){e&&x(t),e&&x(n),i&&i.d(e),e&&x(s)}}}function Re(e){let t,n,s,o;return s=new _e({props:{$$slots:{default:[Oe]},$$scope:{ctx:e}}}),{c(){t=q("div"),n=P(),se(s.$$.fragment),Q(t,"class","gap")},m(e,i){v(e,t,i),v(e,n,i),oe(s,e,i),o=!0},p(e,t){const n={};16386&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){o||(X(s.$$.fragment,e),o=!0)},o(e){Z(s.$$.fragment,e),o=!1},d(e){e&&x(t),e&&x(n),ie(s,e)}}}function je(t){let n;return{c(){n=q("span"),n.textContent="Next question",Q(n,"class","text")},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function Oe(e){let t,n;return t=new Qe({props:{importance:"primary",$$slots:{default:[je]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[10](e[13])})),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(n,s){e=n;const o={};16384&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function Se(e){let t,n,s,o;return s=new _e({props:{$$slots:{default:[Ke]},$$scope:{ctx:e}}}),{c(){t=q("div"),n=P(),se(s.$$.fragment),Q(t,"class","gap")},m(e,i){v(e,t,i),v(e,n,i),oe(s,e,i),o=!0},p(e,t){const n={};16386&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){o||(X(s.$$.fragment,e),o=!0)},o(e){Z(s.$$.fragment,e),o=!1},d(e){e&&x(t),e&&x(n),ie(s,e)}}}function We(t){let n;return{c(){n=q("span"),n.textContent="Restart",Q(n,"class","text")},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function Be(t){let n;return{c(){n=q("span"),n.textContent="Pick another question pack",Q(n,"class","text")},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function Le(t){let n;return{c(){n=q("span"),n.textContent="Close app",Q(n,"class","text")},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function Ke(e){let t,n,s,o,i,c;return t=new Qe({props:{importance:"primary",$$slots:{default:[We]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[7](e[13])})),s=new Qe({props:{importance:"secondary",$$slots:{default:[Be]},$$scope:{ctx:e}}}),s.$on("click",e[8]),i=new Qe({props:{importance:"secondary",$$slots:{default:[Le]},$$scope:{ctx:e}}}),i.$on("click",e[9]),{c(){se(t.$$.fragment),n=P(),se(s.$$.fragment),o=P(),se(i.$$.fragment)},m(e,r){oe(t,e,r),v(e,n,r),oe(s,e,r),v(e,o,r),oe(i,e,r),c=!0},p(n,o){e=n;const c={};16384&o&&(c.$$scope={dirty:o,ctx:e}),t.$set(c);const r={};16384&o&&(r.$$scope={dirty:o,ctx:e}),s.$set(r);const a={};16384&o&&(a.$$scope={dirty:o,ctx:e}),i.$set(a)},i(e){c||(X(t.$$.fragment,e),X(s.$$.fragment,e),X(i.$$.fragment,e),c=!0)},o(e){Z(t.$$.fragment,e),Z(s.$$.fragment,e),Z(i.$$.fragment,e),c=!1},d(e){ie(t,e),e&&x(n),ie(s,e),e&&x(o),ie(i,e)}}}function ze(e){let t,n,s,o,i,c=e[2].clients[e[2].appHostClientUuid]?.clientName+"";return{c(){t=q("div"),n=P(),s=q("p"),o=C(c),i=C(" is the host"),Q(t,"class","gap-sm"),Q(s,"class","svelte-1mjscq6")},m(e,c){v(e,t,c),v(e,n,c),v(e,s,c),b(s,o),b(s,i)},p(e,t){4&t&&c!==(c=e[2].clients[e[2].appHostClientUuid]?.clientName+"")&&U(o,c)},d(e){e&&x(t),e&&x(n),e&&x(s)}}}function De(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Fe(e){let t,n,s,o={ctx:e,current:null,token:null,hasCatch:!1,pending:De,then:Ee,catch:Ae,value:13,blocks:[,,,]};return ee(n=e[1],o),{c(){t=q("div"),o.block.c(),Q(t,"class","game svelte-1mjscq6")},m(e,n){v(e,t,n),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,s=!0},p(t,[s]){e=t,o.ctx=e,2&s&&n!==(n=e[1])&&ee(n,o)||te(o,e,s)},i(e){s||(X(o.block),s=!0)},o(e){for(let e=0;e<3;e+=1)Z(o.blocks[e]);s=!1},d(e){e&&x(t),o.block.d(),o.token=null,o=null}}}function Ge(e,t,n){let s,o,i;d(e,Pe,(e=>n(1,o=e))),d(e,qe,(e=>n(2,i=e)));let{state:c}=t,r=E(),a=e=>{var t=new Set(s);let n=e.questions.map(((e,t)=>({index:t}))).filter(((e,n)=>!t.has(n))),o=n[Math.floor(Math.random()*n.length)];r("message",{type:"nextQuestionAsked",questionPackId:c.questionPackId,previousQuestionIdxs:s,nextQuestionIdx:null==o?void 0:o.index})},l=e=>{let t=Math.floor(Math.random()*e.questions.length);r("message",{type:"questionsReset",questionPackId:c.questionPackId,nextQuestionIdx:t})},u=()=>r("message",{type:"appClosed"}),p=()=>r("message",{type:"anotherQuestionPackRequested"});return e.$$set=e=>{"state"in e&&n(0,c=e.state)},e.$$.update=()=>{1&e.$$.dirty&&(s=[...c.alreadyAskedQuestionsIdxs,c.currentQuestionIdx])},[c,o,i,a,l,u,p,e=>l(e),()=>p(),()=>u(),e=>a(e)]}const Ve=class extends re{constructor(e){super(),ce(this,e,Ge,Fe,i,{state:0})}};function Ye(e){return new Promise((t=>setTimeout(t,e)))}function Je(t){return{c:e,m:e,p:e,d:e}}function Xe(e){let t,n,s,o,i,c,r;return{c(){t=q("link"),n=P(),s=q("div"),o=q("span"),i=q("i"),c=P(),r=C(e[0]),Q(t,"rel","stylesheet"),Q(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"),Q(i,"class","fa fa-circle-notch fa-spin"),Q(s,"class","center-content")},m(e,a){v(e,t,a),v(e,n,a),v(e,s,a),b(s,o),b(o,i),b(o,c),b(o,r)},p(e,t){1&t&&U(r,e[0])},d(e){e&&x(t),e&&x(n),e&&x(s)}}}function Ze(t){return{c:e,m:e,p:e,d:e}}function et(t){let n,s,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Ze,then:Xe,catch:Je,value:3};return ee(s=t[1],o),{c(){n=I(),o.block.c()},m(e,t){v(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,[n]){te(o,t=e,n)},i:e,o:e,d(e){e&&x(n),o.block.d(e),o.token=null,o=null}}}function tt(e,t,n){let{msg:s}=t,{delay:o}=t,i=new Promise(((e,t)=>{setTimeout((()=>e()),o)}));return e.$$set=e=>{"msg"in e&&n(0,s=e.msg),"delay"in e&&n(2,o=e.delay)},[s,i,o]}const nt=class extends re{constructor(e){super(),ce(this,e,tt,et,i,{msg:0,delay:2})}};function st(t){let n,s,o,i,c,r,a,l,u,d=t[0].name+"";return{c(){n=q("div"),s=q("div"),o=q("i"),c=P(),r=q("div"),a=C(d),Q(o,"class",i=g(t[0].icon)+" svelte-wty6dm"),Q(s,"class","question-pack-header svelte-wty6dm"),Q(r,"class","question-pack-app svelte-wty6dm"),Q(n,"class","question-pack svelte-wty6dm")},m(e,i){v(e,n,i),b(n,s),b(s,o),b(n,c),b(n,r),b(r,a),l||(u=M(n,"click",t[1]),l=!0)},p(e,[t]){1&t&&i!==(i=g(e[0].icon)+" svelte-wty6dm")&&Q(o,"class",i),1&t&&d!==(d=e[0].name+"")&&U(a,d)},i:e,o:e,d(e){e&&x(n),l=!1,u()}}}function ot(e,t,n){const s=E();let{value:o}=t;return e.$$set=e=>{"value"in e&&n(0,o=e.value)},[o,function(e){s("click",e)}]}const it=class extends re{constructor(e){super(),ce(this,e,ot,st,i,{value:0})}};function ct(e,t,n){const s=e.slice();return s[9]=t[n],s}function rt(e,t,n){const s=e.slice();return s[9]=t[n],s}function at(t){let n;return{c(){n=q("span"),n.textContent="+ Question pack",Q(n,"class","text")},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function lt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ut(e){let t,n,s=e[8],o=[];for(let t=0;t<s.length;t+=1)o[t]=pt(rt(e,s,t));const i=e=>Z(o[e],1,1,(()=>{o[e]=null}));let c=null;return s.length||(c=dt()),{c(){t=q("div");for(let e=0;e<o.length;e+=1)o[e].c();c&&c.c(),Q(t,"class","question-packs svelte-wlt9df")},m(e,s){v(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);c&&c.m(t,null),n=!0},p(e,n){if(5&n){let r;for(s=e[8],r=0;r<s.length;r+=1){const i=rt(e,s,r);o[r]?(o[r].p(i,n),X(o[r],1)):(o[r]=pt(i),o[r].c(),X(o[r],1),o[r].m(t,null))}for(Y(),r=s.length;r<o.length;r+=1)i(r);J(),!s.length&&c?c.p(e,n):s.length?c&&(c.d(1),c=null):(c=dt(),c.c(),c.m(t,null))}},i(e){if(!n){for(let e=0;e<s.length;e+=1)X(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Z(o[e]);n=!1},d(e){e&&x(t),w(o,e),c&&c.d()}}}function dt(t){let n;return{c(){n=q("span"),n.textContent="Create your own question pack to make your happy hours more fun.",Q(n,"class","placeholder svelte-wlt9df")},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function pt(e){let t,n;return t=new it({props:{value:e[9]}}),t.$on("click",(function(){return e[5](e[9])})),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(n,s){e=n;const o={};1&s&&(o.value=e[9]),t.$set(o)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function ft(t){let n,s;return n=new nt({props:{msg:"Loading question packs",delay:20}}),{c(){se(n.$$.fragment)},m(e,t){oe(n,e,t),s=!0},p:e,i(e){s||(X(n.$$.fragment,e),s=!0)},o(e){Z(n.$$.fragment,e),s=!1},d(e){ie(n,e)}}}function mt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ht(e){let t,n,s=e[8],o=[];for(let t=0;t<s.length;t+=1)o[t]=gt(ct(e,s,t));const i=e=>Z(o[e],1,1,(()=>{o[e]=null}));let c=null;return s.length||(c=$t()),{c(){t=q("div");for(let e=0;e<o.length;e+=1)o[e].c();c&&c.c(),Q(t,"class","question-packs svelte-wlt9df")},m(e,s){v(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);c&&c.m(t,null),n=!0},p(e,n){if(6&n){let r;for(s=e[8],r=0;r<s.length;r+=1){const i=ct(e,s,r);o[r]?(o[r].p(i,n),X(o[r],1)):(o[r]=gt(i),o[r].c(),X(o[r],1),o[r].m(t,null))}for(Y(),r=s.length;r<o.length;r+=1)i(r);J(),!s.length&&c?c.p(e,n):s.length?c&&(c.d(1),c=null):(c=$t(),c.c(),c.m(t,null))}},i(e){if(!n){for(let e=0;e<s.length;e+=1)X(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Z(o[e]);n=!1},d(e){e&&x(t),w(o,e),c&&c.d()}}}function $t(t){let n;return{c(){n=q("span"),n.textContent="Apparently, we haven't created our own question packs (yet)"},m(e,t){v(e,n,t)},p:e,d(e){e&&x(n)}}}function gt(e){let t,n;return t=new it({props:{value:e[9]}}),t.$on("click",(function(){return e[6](e[9])})),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(n,s){e=n;const o={};2&s&&(o.value=e[9]),t.$set(o)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function yt(t){let n,s;return n=new nt({props:{msg:"Loading question packs",delay:20}}),{c(){se(n.$$.fragment)},m(e,t){oe(n,e,t),s=!0},p:e,i(e){s||(X(n.$$.fragment,e),s=!0)},o(e){Z(n.$$.fragment,e),s=!1},d(e){ie(n,e)}}}function kt(e){let t,n,s,o,i,c,a,l,u,d,p,f,m,h,$,g,y=we.length<50&&function(e){let t,n;return t=new Qe({props:{size:"small",importance:"primary",$$slots:{default:[at]},$$scope:{ctx:e}}}),t.$on("click",e[4]),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(e,n){const s={};16384&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}(e),k={ctx:e,current:null,token:null,hasCatch:!1,pending:ft,then:ut,catch:lt,value:8,blocks:[,,,]};ee(d=e[0],k);let w={ctx:e,current:null,token:null,hasCatch:!1,pending:yt,then:ht,catch:mt,value:8,blocks:[,,,]};return ee($=e[1],w),{c(){var e,d;t=q("div"),n=q("div"),s=q("img"),i=P(),c=q("div"),c.innerHTML="<h5>Your icebreakers</h5> \n            <span>Launch your own question pack or create a new one</span>",a=P(),y&&y.c(),l=P(),u=q("div"),k.block.c(),p=P(),f=q("div"),f.innerHTML='<img src="assets/rocket.svg" alt="Recommended icon"/> \n        <div style="flex-grow: 1"><h5>Kosy recommends</h5> \n            <span>Pick one of our custom question packs</span></div>',m=P(),h=q("div"),w.block.c(),r(s.src,o="assets/favorite.svg")||Q(s,"src","assets/favorite.svg"),Q(s,"alt","Favorite icon"),e=c,d="flex-grow",null==="1"?e.style.removeProperty(d):e.style.setProperty(d,"1",""),Q(n,"class","title svelte-wlt9df"),Q(u,"class","custom-packs svelte-wlt9df"),Q(f,"class","title svelte-wlt9df"),Q(h,"class","svelte-wlt9df"),Q(t,"id","main"),Q(t,"class","svelte-wlt9df")},m(e,o){v(e,t,o),b(t,n),b(n,s),b(n,i),b(n,c),b(n,a),y&&y.m(n,null),b(t,l),b(t,u),k.block.m(u,k.anchor=null),k.mount=()=>u,k.anchor=null,b(t,p),b(t,f),b(t,m),b(t,h),w.block.m(h,w.anchor=null),w.mount=()=>h,w.anchor=null,g=!0},p(t,[n]){e=t,we.length<50&&y.p(e,n),k.ctx=e,1&n&&d!==(d=e[0])&&ee(d,k)||te(k,e,n),w.ctx=e,2&n&&$!==($=e[1])&&ee($,w)||te(w,e,n)},i(e){g||(X(y),X(k.block),X(w.block),g=!0)},o(e){Z(y);for(let e=0;e<3;e+=1)Z(k.blocks[e]);for(let e=0;e<3;e+=1)Z(w.blocks[e]);g=!1},d(e){e&&x(t),y&&y.d(),k.block.d(),k.token=null,k=null,w.block.d(),w.token=null,w=null}}}function bt(e,t,n){let s,o;var i=E();const c=e=>{i("message",{type:"questionPackPicked",questionPackId:e.id,nextQuestionIdx:0})},r=()=>{i("message",{type:"questionPackCreationRequested"})};return n(1,s=Promise.all([Ye(2e3),Promise.resolve(we.filter((e=>e.isPublic)))]).then((e=>e[1]))),n(0,o=Promise.all([Ye(2e3),Promise.resolve(we.filter((e=>!e.isPublic)))]).then((e=>e[1]))),[o,s,c,r,()=>r(),e=>c(e),e=>c(e)]}const vt=class extends re{constructor(e){super(),ce(this,e,bt,kt,i,{})}};function xt(t){let n,s,o,i;return{c(){n=q("div"),s=C("Waiting for "),o=C(t[0]),i=C(" to pick an icebreaker question pack.")},m(e,t){v(e,n,t),b(n,s),b(n,o),b(n,i)},p(e,[t]){1&t&&U(o,e[0])},i:e,o:e,d(e){e&&x(n)}}}function wt(e,t,n){let{userName:s}=t;return e.$$set=e=>{"userName"in e&&n(0,s=e.userName)},[s]}const qt=class extends re{constructor(e){super(),ce(this,e,wt,xt,i,{userName:0})}};class Ct{constructor(e){this.id=e.id,this.name=e.name,this.icon=e.icon,this.isPublic=e.isPublic,this.orderNumber=e.orderNumber,this.questions=e.questions.map((e=>new Pt(e)))}toQuestionPack(){return{id:this.id,name:this.name,icon:this.icon,isPublic:this.isPublic,orderNumber:this.orderNumber,questions:this.questions.map((e=>e.question))}}}class Pt{constructor(e){this.id=ke(),this.question=e}}function It(e,t,n){const s=e.slice();return s[22]=t[n],s[24]=n,s}function Mt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Qt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ut(e){let t,n,s,o;const i=[_t,Nt],c=[];function r(e,t){return"questionPackEditor"==e[0].type?0:"questionEditor"==e[0].type?1:-1}return~(t=r(e))&&(n=c[t]=i[t](e)),{c(){n&&n.c(),s=I()},m(e,n){~t&&c[t].m(e,n),v(e,s,n),o=!0},p(e,o){let a=t;t=r(e),t===a?~t&&c[t].p(e,o):(n&&(Y(),Z(c[a],1,1,(()=>{c[a]=null})),J()),~t?(n=c[t],n?n.p(e,o):(n=c[t]=i[t](e),n.c()),X(n,1),n.m(s.parentNode,s)):n=null)},i(e){o||(X(n),o=!0)},o(e){Z(n),o=!1},d(e){~t&&c[t].d(e),e&&x(s)}}}function Nt(e){let t,n,s,o,i,c,r,a,l,u,d;return a=new _e({props:{$$slots:{default:[Ht]},$$scope:{ctx:e}}}),{c(){t=q("div"),n=q("label"),n.textContent="Question",s=P(),o=q("input"),i=P(),c=q("div"),c.innerHTML='<label for="imageId">Image</label> \n            <input id="imageId" type="text" value="TODO."/>',r=P(),se(a.$$.fragment),Q(n,"for","text"),Q(o,"id","text"),Q(o,"type","text")},m(p,f){v(p,t,f),b(t,n),b(t,s),b(t,o),N(o,e[0].question.question.text),v(p,i,f),v(p,c,f),v(p,r,f),oe(a,p,f),l=!0,u||(d=M(o,"input",e[17]),u=!0)},p(e,t){1&t&&o.value!==e[0].question.question.text&&N(o,e[0].question.question.text);const n={};33554432&t&&(n.$$scope={dirty:t,ctx:e}),a.$set(n)},i(e){l||(X(a.$$.fragment,e),l=!0)},o(e){Z(a.$$.fragment,e),l=!1},d(e){e&&x(t),e&&x(i),e&&x(c),e&&x(r),ie(a,e),u=!1,d()}}}function _t(e){let t,n,o,i,c,r,a,l,u,d,p,f,m,h,$,g,y,k,w,C,I,U,_,A=[],E=new Map,H=e[2].questions;const T=e=>e[22].id;for(let t=0;t<H.length;t+=1){let n=It(e,H,t),s=T(n);E.set(s,A[t]=Rt(s,n))}const R=[Ot,jt],j=[];function O(e,t){return e[2].questions.length<50?0:1}return y=O(e),k=j[y]=R[y](e),C=new _e({props:{$$slots:{default:[Kt]},$$scope:{ctx:e}}}),{c(){t=q("fieldset"),n=q("div"),o=q("label"),o.textContent="Name",i=P(),c=q("input"),r=P(),a=q("div"),l=q("label"),l.textContent="Icon",u=P(),d=q("input"),p=P(),f=q("div"),m=q("label"),m.textContent="Questions",h=P(),$=q("ul");for(let e=0;e<A.length;e+=1)A[e].c();g=P(),k.c(),w=P(),se(C.$$.fragment),Q(o,"for","name"),Q(c,"id","name"),Q(c,"type","text"),Q(l,"for","description"),Q(d,"id","description"),Q(d,"type","text"),Q(m,"for","questions"),Q($,"id","questions"),t.disabled=e[1]},m(s,k){v(s,t,k),b(t,n),b(n,o),b(n,i),b(n,c),N(c,e[2].name),b(t,r),b(t,a),b(a,l),b(a,u),b(a,d),N(d,e[2].icon),b(t,p),b(t,f),b(f,m),b(f,h),b(f,$);for(let e=0;e<A.length;e+=1)A[e].m($,null);b($,g),j[y].m($,null),b(t,w),oe(C,t,null),I=!0,U||(_=[M(c,"input",e[11]),M(d,"input",e[12])],U=!0)},p(e,n){4&n&&c.value!==e[2].name&&N(c,e[2].name),4&n&&d.value!==e[2].icon&&N(d,e[2].icon),68&n&&(H=e[2].questions,Y(),A=function(e,t,n,s,o,i,c,r,a,l,u,d){let p=e.length,f=i.length,m=p;const h={};for(;m--;)h[e[m].key]=m;const $=[],g=new Map,y=new Map;for(m=f;m--;){const e=d(o,i,m),s=n(e);let r=c.get(s);r?r.p(e,t):(r=l(s,e),r.c()),g.set(s,$[m]=r),s in h&&y.set(s,Math.abs(m-h[s]))}const k=new Set,b=new Set;function v(e){X(e,1),e.m(r,u),c.set(e.key,e),u=e.first,f--}for(;p&&f;){const t=$[f-1],n=e[p-1],s=t.key,o=n.key;t===n?(u=t.first,p--,f--):g.has(o)?!c.has(s)||k.has(s)?v(t):b.has(o)?p--:y.get(s)>y.get(o)?(b.add(s),v(t)):(k.add(o),p--):(a(n,c),p--)}for(;p--;){const t=e[p];g.has(t.key)||a(t,c)}for(;f;)v($[f-1]);return $}(A,n,T,0,e,H,E,$,ne,Rt,g,It),J());let s=y;y=O(e),y===s?j[y].p(e,n):(Y(),Z(j[s],1,1,(()=>{j[s]=null})),J(),k=j[y],k?k.p(e,n):(k=j[y]=R[y](e),k.c()),X(k,1),k.m($,null));const o={};33554432&n&&(o.$$scope={dirty:n,ctx:e}),C.$set(o),(!I||2&n)&&(t.disabled=e[1])},i(e){if(!I){for(let e=0;e<H.length;e+=1)X(A[e]);X(k),X(C.$$.fragment,e),I=!0}},o(e){for(let e=0;e<A.length;e+=1)Z(A[e]);Z(k),Z(C.$$.fragment,e),I=!1},d(e){e&&x(t);for(let e=0;e<A.length;e+=1)A[e].d();j[y].d(),ie(C),U=!1,s(_)}}}function At(e){let t;return{c(){t=C("Save")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Et(e){let t;return{c(){t=C("Cancel")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Ht(e){let t,n,s,o;return t=new Qe({props:{importance:"primary",$$slots:{default:[At]},$$scope:{ctx:e}}}),t.$on("click",e[18]),s=new Qe({props:{importance:"secondary",$$slots:{default:[Et]},$$scope:{ctx:e}}}),s.$on("click",e[19]),{c(){se(t.$$.fragment),n=P(),se(s.$$.fragment)},m(e,i){oe(t,e,i),v(e,n,i),oe(s,e,i),o=!0},p(e,n){const o={};33554432&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};33554432&n&&(i.$$scope={dirty:n,ctx:e}),s.$set(i)},i(e){o||(X(t.$$.fragment,e),X(s.$$.fragment,e),o=!0)},o(e){Z(t.$$.fragment,e),Z(s.$$.fragment,e),o=!1},d(e){ie(t,e),e&&x(n),ie(s,e)}}}function Tt(e){let t;return{c(){t=C("EDIT QUESTION (TODO: style me)")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Rt(e,t){let n,s,o,i,c,r;return c=new Qe({props:{importance:"tertiary",$$slots:{default:[Tt]},$$scope:{ctx:t}}}),c.$on("click",(function(){return t[13](t[22],t[24])})),{key:e,first:null,c(){n=q("li"),s=q("input"),i=P(),se(c.$$.fragment),Q(s,"type","text"),s.value=o=t[22].question.text,this.first=n},m(e,t){v(e,n,t),b(n,s),b(n,i),oe(c,n,null),r=!0},p(e,n){t=e,(!r||4&n&&o!==(o=t[22].question.text)&&s.value!==o)&&(s.value=o);const i={};33554432&n&&(i.$$scope={dirty:n,ctx:t}),c.$set(i)},i(e){r||(X(c.$$.fragment,e),r=!0)},o(e){Z(c.$$.fragment,e),r=!1},d(e){e&&x(n),ie(c)}}}function jt(e){let t,n,s;return n=new Qe({props:{importance:"tertiary",disabled:!0,$$slots:{default:[St]},$$scope:{ctx:e}}}),{c(){t=q("li"),se(n.$$.fragment)},m(e,o){v(e,t,o),oe(n,t,null),s=!0},p(e,t){const s={};33554432&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){s||(X(n.$$.fragment,e),s=!0)},o(e){Z(n.$$.fragment,e),s=!1},d(e){e&&x(t),ie(n)}}}function Ot(e){let t,n,s;return n=new Qe({props:{importance:"tertiary",$$slots:{default:[Wt]},$$scope:{ctx:e}}}),n.$on("click",e[14]),{c(){t=q("li"),se(n.$$.fragment)},m(e,o){v(e,t,o),oe(n,t,null),s=!0},p(e,t){const s={};33554432&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){s||(X(n.$$.fragment,e),s=!0)},o(e){Z(n.$$.fragment,e),s=!1},d(e){e&&x(t),ie(n)}}}function St(e){let t;return{c(){t=C("MAXIMUM QUESTIONS REACHED (TODO: style me)")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Wt(e){let t;return{c(){t=C("ADD QUESTION (TODO: style me)")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Bt(e){let t;return{c(){t=C("Save")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Lt(e){let t;return{c(){t=C("Cancel")},m(e,n){v(e,t,n)},d(e){e&&x(t)}}}function Kt(e){let t,n,s,o;return t=new Qe({props:{importance:"primary",$$slots:{default:[Bt]},$$scope:{ctx:e}}}),t.$on("click",e[15]),s=new Qe({props:{importance:"secondary",$$slots:{default:[Lt]},$$scope:{ctx:e}}}),s.$on("click",e[16]),{c(){se(t.$$.fragment),n=P(),se(s.$$.fragment)},m(e,i){oe(t,e,i),v(e,n,i),oe(s,e,i),o=!0},p(e,n){const o={};33554432&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};33554432&n&&(i.$$scope={dirty:n,ctx:e}),s.$set(i)},i(e){o||(X(t.$$.fragment,e),X(s.$$.fragment,e),o=!0)},o(e){Z(t.$$.fragment,e),Z(s.$$.fragment,e),o=!1},d(e){ie(t,e),e&&x(n),ie(s,e)}}}function zt(e){let t,n,s,o={ctx:e,current:null,token:null,hasCatch:!1,pending:Ut,then:Qt,catch:Mt,blocks:[,,,]};return ee(n=e[3],o),{c(){t=I(),o.block.c()},m(e,n){v(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t,s=!0},p(t,[n]){te(o,e=t,n)},i(e){s||(X(o.block),s=!0)},o(e){for(let e=0;e<3;e+=1)Z(o.blocks[e]);s=!1},d(e){e&&x(t),o.block.d(e),o.token=null,o=null}}}function Dt(e,t,n){let s;d(e,Pe,(e=>n(20,s=e)));let o,{state:i}=t,c={type:"questionPackEditor"},r=!1,a=E(),l=new Promise((async(e,t)=>{let c=await("creatingQuestionPack"===i.type?Promise.resolve(null):s);n(2,o=new Ct(null!=c?c:new ve)),e(null)}));const u=async()=>{let e=o.toQuestionPack();switch(n(1,r=!0),await(e=>{const t=xe.findIndex((t=>t.id===e.id));return-1===t?xe.push(e):xe[t]=e,Promise.resolve(!0)})(e),Ce.set(null),n(1,r=!1),i.type){case"creatingQuestionPack":a("message",{type:"questionPackCreated",questionPack:e});case"editingQuestionPack":a("message",{type:"questionPackEdited",questionPack:e})}},p=()=>{a("message",{type:"questionPackEditCancelled"})},f=(e,t)=>{n(0,c={type:"questionEditor",question:Object.assign({},e),index:t})},m=()=>{n(0,c={type:"questionEditor",question:{id:ke(),question:{text:"",imageId:""}},index:o.questions.length})},h=()=>{var e=c;n(2,o.questions[e.index]=e.question,o),n(0,c={type:"questionPackEditor"})},$=()=>{n(0,c={type:"questionPackEditor"})};return e.$$set=e=>{"state"in e&&n(10,i=e.state)},[c,r,o,l,u,p,f,m,h,$,i,function(){o.name=this.value,n(2,o)},function(){o.icon=this.value,n(2,o)},(e,t)=>f(e,t),()=>m(),()=>u(),()=>p(),function(){c.question.question.text=this.value,n(0,c)},()=>h(),()=>$()]}const Ft=class extends re{constructor(e){super(),ce(this,e,Dt,zt,i,{state:10})}};function Gt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Vt(e){let t,n,s,o;const i=[en,Zt,Xt,Jt,Yt],c=[];function r(e,t){return"playingGame"===e[1].type?0:e[0].appHostClientUuid!==e[0].currentClientUuid?1:"pickingQuestionPack"===e[1].type?2:"creatingQuestionPack"===e[1].type?3:"editingQuestionPack"===e[1].type?4:-1}return~(t=r(e))&&(n=c[t]=i[t](e)),{c(){n&&n.c(),s=I()},m(e,n){~t&&c[t].m(e,n),v(e,s,n),o=!0},p(e,o){let a=t;t=r(e),t===a?~t&&c[t].p(e,o):(n&&(Y(),Z(c[a],1,1,(()=>{c[a]=null})),J()),~t?(n=c[t],n?n.p(e,o):(n=c[t]=i[t](e),n.c()),X(n,1),n.m(s.parentNode,s)):n=null)},i(e){o||(X(n),o=!0)},o(e){Z(n),o=!1},d(e){~t&&c[t].d(e),e&&x(s)}}}function Yt(e){let t,n;return t=new Ft({props:{state:e[1]}}),t.$on("message",e[7]),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.state=e[1]),t.$set(s)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function Jt(e){let t,n;return t=new Ft({props:{state:e[1]}}),t.$on("message",e[6]),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.state=e[1]),t.$set(s)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function Xt(t){let n,s;return n=new vt({}),n.$on("message",t[5]),{c(){se(n.$$.fragment)},m(e,t){oe(n,e,t),s=!0},p:e,i(e){s||(X(n.$$.fragment,e),s=!0)},o(e){Z(n.$$.fragment,e),s=!1},d(e){ie(n,e)}}}function Zt(e){let t,n;return t=new qt({props:{userName:e[0].clients[e[0].appHostClientUuid].clientName}}),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.userName=e[0].clients[e[0].appHostClientUuid].clientName),t.$set(s)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function en(e){let t,n;return t=new Ve({props:{state:e[1]}}),t.$on("message",e[4]),{c(){se(t.$$.fragment)},m(e,s){oe(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.state=e[1]),t.$set(s)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function tn(t){let n,s;return n=new nt({props:{msg:"Loading icebreaker app",delay:3e3}}),{c(){se(n.$$.fragment)},m(e,t){oe(n,e,t),s=!0},p:e,i(e){s||(X(n.$$.fragment,e),s=!0)},o(e){Z(n.$$.fragment,e),s=!1},d(e){ie(n,e)}}}function nn(e){let t,n,s,o={ctx:e,current:null,token:null,hasCatch:!1,pending:tn,then:Vt,catch:Gt,value:15,blocks:[,,,]};return ee(n=e[3],o),{c(){t=q("main"),o.block.c()},m(e,n){v(e,t,n),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,s=!0},p(t,[n]){te(o,e=t,n)},i(e){s||(X(o.block),s=!0)},o(e){for(let e=0;e<3;e+=1)Z(o.blocks[e]);s=!1},d(e){e&&x(t),o.block.d(),o.token=null,o=null}}}function sn(e,t,n){let s,o;d(e,qe,(e=>n(0,s=e))),d(e,de,(e=>n(1,o=e)));const i=new ae({onClientHasJoined:e=>(e=>{qe.set(Object.assign(Object.assign({},s),{clients:Object.assign(Object.assign({},s.clients),{[e.clientUuid]:e})}))})(e),onClientHasLeft:e=>(e=>{e===s.appHostClientUuid&&qe.set(Object.assign(Object.assign({},s),{appHostClientUuid:s.kosyHostClientUuid})),qe.set(Object.assign(Object.assign({},s),{clients:Object.assign(Object.assign({},s.clients),{[e]:void 0})}))})(e),onHostHasChanged:e=>(e=>{qe.set(Object.assign(Object.assign({},s),{kosyHostClientUuid:e})),s.clients[s.appHostClientUuid]||qe.set(Object.assign(Object.assign({},s),{appHostClientUuid:e}))})(e),onReceiveMessageAsHost:e=>e,onReceiveMessageAsClient:e=>{(async e=>{switch(console.log("Received a message from Kosy: ",e),e.type){case"question-asked":de.set({type:"playingGame",questionPackId:e.questionPackId,alreadyAskedQuestionsIdxs:e.previousQuestionIdxs,currentQuestionIdx:e.currentQuestionIdx});break;case"questions-reset":de.set({type:"playingGame",questionPackId:e.questionPackId,alreadyAskedQuestionsIdxs:[],currentQuestionIdx:e.currentQuestionIdx});break;case"pick-question-pack-requested":de.set({type:"pickingQuestionPack"})}})(e)},onRequestState:()=>o,onProvideState:e=>(e=>{de.set(e)})(e)});let c=e=>{switch(e.type){case"nextQuestionAsked":i.relayMessage({type:"question-asked",questionPackId:e.questionPackId,previousQuestionIdxs:e.previousQuestionIdxs,currentQuestionIdx:e.nextQuestionIdx});break;case"questionsReset":i.relayMessage({type:"questions-reset",questionPackId:e.questionPackId,currentQuestionIdx:e.nextQuestionIdx});break;case"appClosed":i.stopApp();break;case"questionPackPicked":i.relayMessage({type:"question-asked",questionPackId:e.questionPackId,previousQuestionIdxs:[],currentQuestionIdx:e.nextQuestionIdx});break;case"anotherQuestionPackRequested":i.relayMessage({type:"pick-question-pack-requested"});break;case"questionPackCreationRequested":de.set({type:"creatingQuestionPack"});break;case"questionPackEditRequested":de.set({type:"editingQuestionPack",questionPackId:e.questionPackId});break;case"questionPackEdited":case"questionPackCreated":de.set({type:"pickingQuestionPack"})}},r=i.startApp().then((e=>{qe.set({clients:e.clients,appHostClientUuid:e.initializerClientUuid,kosyHostClientUuid:e.initializerClientUuid,currentClientUuid:e.currentClientUuid}),e.currentAppState&&"loading"!==e.currentAppState.type?de.set(e.currentAppState):de.set({type:"pickingQuestionPack"})}));return[s,o,c,r,e=>c(e.detail),e=>c(e.detail),e=>c(e.detail),e=>c(e.detail)]}new class extends re{constructor(e){super(),ce(this,e,sn,nn,i,{})}}({target:document.getElementById("container"),props:{}})})()})();