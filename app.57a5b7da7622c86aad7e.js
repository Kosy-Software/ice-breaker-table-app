(()=>{"use strict";(()=>{function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function a(e){return 0===Object.keys(e).length}function l(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function u(e,t,n){e.$$.on_destroy.push(l(t,n))}function d(e,t,n,s){if(e){const o=p(e,t,n,s);return e[0](o)}}function p(e,t,n,s){return e[1]&&s?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](s(t))):n.ctx}function f(e,t,n,s){if(e[2]&&s){const o=e[2](s(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|o[s];return e}return t.dirty|o}return t.dirty}function m(e,t,n,s,o,i){if(o){const c=p(t,n,s,i);e.p(c,o)}}function $(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function h(e){return null==e?"":e}new Set;let g,y=!1;function k(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function C(){return w(" ")}function P(){return w("")}function I(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function N(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Q(e,t){e.value=null==t?"":t}function U(e){g=e}function _(){if(!g)throw new Error("Function called outside component initialization");return g}function E(){const e=_();return(t,n,{cancelable:s=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,s,t),o}(t,n,{cancelable:s});return o.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}function A(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}new Map;const H=[],T=[],R=[],O=[],j=Promise.resolve();let S=!1;function W(e){R.push(e)}const z=new Set;let B=0;function L(){const e=g;do{for(;B<H.length;){const e=H[B];B++,U(e),K(e.$$)}for(U(null),H.length=0,B=0;T.length;)T.pop()();for(let e=0;e<R.length;e+=1){const t=R[e];z.has(t)||(z.add(t),t())}R.length=0}while(H.length);for(;O.length;)O.pop()();S=!1,z.clear(),U(e)}function K(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}const D=new Set;let F,G;function J(){F={r:0,c:[],p:F}}function V(){F.r||s(F.c),F=F.p}function Y(e,t){e&&e.i&&(D.delete(e),e.i(t))}function X(e,t,n,s){if(e&&e.o){if(D.has(e))return;D.add(e),F.c.push((()=>{D.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}else s&&s()}function Z(e,t){const n=t.token={};function s(e,s,o,i){if(t.token!==n)return;t.resolved=i;let c=t.ctx;void 0!==o&&(c=c.slice(),c[o]=i);const r=e&&(t.current=e)(c);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(J(),X(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),V())})):t.block.d(1),r.c(),Y(r,1),r.m(t.mount(),t.anchor),a=!0),t.block=r,t.blocks&&(t.blocks[s]=r),a&&L()}if((o=e)&&"object"==typeof o&&"function"==typeof o.then){const n=_();if(e.then((e=>{U(n),s(t.then,1,t.value,e),U(null)}),(e=>{if(U(n),s(t.catch,2,t.error,e),U(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var o}function ee(e,t,n){const s=t.slice(),{resolved:o}=e;e.current===e.then&&(s[e.value]=o),e.current===e.catch&&(s[e.error]=o),e.block.p(s,n)}function te(e,t){X(e,1,1,(()=>{t.delete(e.key)}))}function ne(e){e&&e.c()}function se(e,n,i,c){const{fragment:r,on_mount:a,on_destroy:l,after_update:u}=e.$$;r&&r.m(n,i),c||W((()=>{const n=a.map(t).filter(o);l?l.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(W)}function oe(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ie(t,o,i,c,r,a,l,u=[-1]){const d=g;U(t);const p=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||d.$$.root};l&&l(p.root);let f=!1;if(p.ctx=i?i(t,o.props||{},((e,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&r(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),f&&function(e,t){-1===e.$$.dirty[0]&&(H.push(e),S||(S=!0,j.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),f=!0,s(p.before_update),p.fragment=!!c&&c(p.ctx),o.target){if(o.hydrate){y=!0;const e=(m=o.target,Array.from(m.childNodes));p.fragment&&p.fragment.l(e),e.forEach(v)}else p.fragment&&p.fragment.c();o.intro&&Y(t.$$.fragment),se(t,o.target,o.anchor,o.customElement),y=!1,L()}var m;U(d)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(G=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(o);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){oe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!a(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class ce{$destroy(){oe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!a(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class re{constructor(e){this.kosyClient=window.parent,this.latestMessageNumber=0,this.kosyApp=e}dictionaryToArray(e){let t=[];for(const n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t}startApp(){return this.initialInfoPromise=new Promise(((e,t)=>{window.addEventListener("message",(t=>{let n=t.data;switch(n.type){case"receive-initial-info":this.latestMessageNumber=n.latestMessageNumber,this.clients=n.payload.clients,this.hostClientUuid=n.payload.initializerClientUuid,this.log("Resolving initial info promise with: ",n.payload),e(n.payload);break;case"set-client-info":{let e=n.clients,t=n.hostClientUuid;this.initialInfoPromise.then((n=>{let s=this.dictionaryToArray(e).filter((e=>!this.clients[e[0]])),o=this.dictionaryToArray(this.clients).filter((t=>!e[t[0]])),i=this.latestMessageNumber;this.hostClientUuid!==t&&this._relayMessageToClients(n,{type:"_host-has-changed",clientUuid:t},++i),s.forEach((e=>this._relayMessageToClients(n,{type:"_client-has-joined",clientInfo:e[1]},++i))),o.forEach((e=>this._relayMessageToClients(n,{type:"_client-has-left",clientUuid:e[0]},++i))),this.clients=e,this.hostClientUuid=t}));break}case"get-app-state":{let e=n.clientUuids;this.log("Get app state received -> sending app state");const t=this.kosyApp.onRequestState();this._sendMessageToKosy({type:"receive-app-state",state:t,clientUuids:e,latestMessageNumber:this.latestMessageNumber});break}case"set-app-state":this.latestMessageNumber=n.latestMessageNumber;let t=n.state;this.initialInfoPromise.then((()=>{this.log("Received app state from Kosy -> setting app state"),this.kosyApp.onProvideState(t)}));break;case"receive-message-as-host":this._handleReceiveMessageAsHost(n);break;case"receive-message-as-client":this._handleReceiveMessageAsClient(n)}})),this._sendMessageToKosy({type:"ready-and-listening"})})),this.initialInfoPromise}stopApp(){this._sendMessageToKosy({type:"stop-app"})}relayMessage(e){this.log("Relaying client message to host: ",e),this._sendMessageToKosy({type:"relay-message-to-host",message:e})}_relayMessageToClients(e,t,n){this.log("Relaying host to client message: ",t),this._sendMessageToKosy({type:"relay-message-to-clients",sentByClientUuid:e.currentClientUuid,message:t,messageNumber:n})}_sendMessageToKosy(e){this.kosyClient.postMessage(e,"*")}_handleReceiveMessageAsClientRecursive(e,t,n){var s,o,i,c,r,a;if(this.latestMessageNumber===e.messageNumber-1){switch(e.message.type){case"_host-has-changed":{let t=e.message.clientUuid;this.hostClientUuid=t,null===(o=(s=this.kosyApp).onHostHasChanged)||void 0===o||o.call(s,t);break}case"_client-has-joined":{let t=e.message.clientInfo;this.clients[t.clientUuid]=t,null===(c=(i=this.kosyApp).onClientHasJoined)||void 0===c||c.call(i,t);break}case"_client-has-left":{let t=e.message.clientUuid;this.clients[t]=null,null===(a=(r=this.kosyApp).onClientHasLeft)||void 0===a||a.call(r,t);break}default:this.kosyApp.onReceiveMessageAsClient(e.message)}this.latestMessageNumber=e.messageNumber}else n<50&&this.latestMessageNumber<e.messageNumber?setTimeout((()=>this._handleReceiveMessageAsClientRecursive(e,t,n+1)),100):(this.log("Timeout on processing message as client: ",e.message),this.log("Wait for Kosy to fix this mess..."))}_handleReceiveMessageAsClient(e){this.initialInfoPromise.then((t=>{this.log("Received message as client, processing: ",e.message),this._handleReceiveMessageAsClientRecursive(e,t,0)}))}_handleReceiveMessageAsHost(e){this.initialInfoPromise.then((t=>{this.log("Trying to handle message as host");const n=this.kosyApp.onReceiveMessageAsHost(e.message);n&&this._relayMessageToClients(t,n,this.latestMessageNumber+1)}))}log(...e){"1"===localStorage.getItem("debug-mode")&&console.log("From kosy-app-api: ",...e)}}const ae=[];function le(t,n=e){let s;const o=new Set;function c(e){if(i(t,e)&&(t=e,s)){const e=!ae.length;for(const e of o)e[1](),ae.push(e,t);if(e){for(let e=0;e<ae.length;e+=2)ae[e][0](ae[e+1]);ae.length=0}}}return{set:c,update:function(e){c(e(t))},subscribe:function(i,r=e){const a=[i,r];return o.add(a),1===o.size&&(s=n(c)||e),i(t),()=>{o.delete(a),0===o.size&&(s(),s=null)}}}}const ue=le({type:"loading"});var de,pe=new Uint8Array(16);function fe(){if(!de&&!(de="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return de(pe)}const me=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,$e=function(e){return"string"==typeof e&&me.test(e)};for(var he=[],ge=0;ge<256;++ge)he.push((ge+256).toString(16).substr(1));const ye=function(e,t,n){var s=(e=e||{}).random||(e.rng||fe)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=s[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(he[e[t+0]]+he[e[t+1]]+he[e[t+2]]+he[e[t+3]]+"-"+he[e[t+4]]+he[e[t+5]]+"-"+he[e[t+6]]+he[e[t+7]]+"-"+he[e[t+8]]+he[e[t+9]]+"-"+he[e[t+10]]+he[e[t+11]]+he[e[t+12]]+he[e[t+13]]+he[e[t+14]]+he[e[t+15]]).toLowerCase();if(!$e(n))throw TypeError("Stringified UUID is invalid");return n}(s)};class ke{constructor(e,t){this.text=e,this.imageId=t}}class be{constructor(){this.id=ye(),this.name="",this.icon="",this.isPublic=!1,this.orderNumber=-1,this.questions=[]}}let ve=[{id:"1",icon:"far fa-face-smile",orderNumber:1,isPublic:!0,name:"Fun Icebreaker Questions",questions:[new ke("What is Kosy?"),new ke("Who is Kosy?"),new ke("Why is Kosy?"),new ke("When is Kosy?")]},{id:"2",icon:"far fa-comment-dots",orderNumber:2,isPublic:!0,name:"Icebreaker Questions for Work",questions:[new ke("Why do birds, suddenly appear?"),new ke("Why did the chicken cross the road?"),new ke("How many superheroes took their name and inspiration from the animal kingdom?")]},{id:"3",icon:"far fa-face-surprise",orderNumber:3,isPublic:!0,name:"Weird Icebreaker Questions",questions:[new ke("What are the main advantages of using typescript over javascript?"),new ke("What are the main disadvantages of using typescript over javascript?")]},{id:"4",icon:"far fa-sun",orderNumber:4,isPublic:!0,name:"Holiday Icebreaker Questions",questions:[new ke("What is the most Belgian thing you can think of?"),new ke("What kinds of Belgian beer can you think of?")]},{id:"5",icon:"far fa-calendar",orderNumber:5,isPublic:!0,name:"Best Questions for Meetings",questions:[new ke("What is the most Belgian thing you can think of?"),new ke("What kinds of Belgian beer can you think of?")]},{id:"6",icon:"far fa-face-smile",orderNumber:6,isPublic:!0,name:"Fun Team Icebreaker Questions",questions:[new ke("What is the most Belgian thing you can think of?"),new ke("What kinds of Belgian beer can you think of?")]},{id:"7",icon:"far fa-comments",orderNumber:7,isPublic:!0,name:"Community Building Questions",questions:[new ke("What is the most Belgian thing you can think of?"),new ke("What kinds of Belgian beer can you think of?")]},{id:"8",icon:"fas fa-fire-flame-curved",orderNumber:8,isPublic:!0,name:"Inappropriate Icebreakers",questions:[new ke("What is the most Belgian thing you can think of?"),new ke("What kinds of Belgian beer can you think of?")]}];const xe=(()=>{var e=JSON.parse(localStorage.getItem("questionPacks"));return e&&1===e.version?e.questionPacks:(localStorage.setItem("questionPacks",JSON.stringify({version:1,questionPacks:ve})),ve)})();console.log("Stored qPacks: ",xe);const qe=xe,we=le({clients:{},appHostClientUuid:"",kosyHostClientUuid:"",currentClientUuid:""}),Ce=le(null),Pe=e=>{switch(null==e?void 0:e.type){case"playingGame":case"editingQuestionPack":var t=function(e){let t;return l(e,(e=>t=e))(),t}(Ce);if((null==t?void 0:t.id)===e.questionPackId)return Promise.resolve(t);var n=(s=e.questionPackId,o=xe.filter((e=>e.id===s))[0],console.log("Found qPack:",o),o);return Ce.set(n),Promise.resolve(n);default:return Promise.resolve(null)}var s,o};function Ie(e){let t,n,o,i;const c=e[5].default,r=d(c,e,e[4],null);return{c(){t=q("button"),r&&r.c(),M(t,"class",e[1]),t.disabled=e[0]},m(s,c){b(s,t,c),r&&r.m(t,null),n=!0,o||(i=[I(t,"click",e[6]),I(t,"dblclick",e[7]),I(t,"focus",e[8])],o=!0)},p(e,[s]){r&&r.p&&(!n||16&s)&&m(r,c,e,e[4],n?f(c,e[4],s,null):$(e[4]),null),(!n||2&s)&&M(t,"class",e[1]),(!n||1&s)&&(t.disabled=e[0])},i(e){n||(Y(r,e),n=!0)},o(e){X(r,e),n=!1},d(e){e&&v(t),r&&r.d(e),o=!1,s(i)}}}function Me(e,t,n){let{$$slots:s={},$$scope:o}=t,{size:i="regular"}=t,{importance:c}=t,{disabled:r=!1}=t,a="";return e.$$set=e=>{"size"in e&&n(2,i=e.size),"importance"in e&&n(3,c=e.importance),"disabled"in e&&n(0,r=e.disabled),"$$scope"in e&&n(4,o=e.$$scope)},e.$$.update=()=>{if(12&e.$$.dirty){let e=["re-button","size-"+i];c&&e.push("importance-"+c),n(1,a=e.join(" "))}},[r,a,i,c,o,s,function(t){A.call(this,e,t)},function(t){A.call(this,e,t)},function(t){A.call(this,e,t)}]}const Ne=class extends ce{constructor(e){super(),ie(this,e,Me,Ie,i,{size:2,importance:3,disabled:0})}};function Qe(e){let t,n;const s=e[1].default,o=d(s,e,e[0],null);return{c(){t=q("div"),o&&o.c(),M(t,"class","re-button-group svelte-1omxfsn")},m(e,s){b(e,t,s),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&(!n||1&t)&&m(o,s,e,e[0],n?f(s,e[0],t,null):$(e[0]),null)},i(e){n||(Y(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&v(t),o&&o.d(e)}}}function Ue(e,t,n){let{$$slots:s={},$$scope:o}=t;return e.$$set=e=>{"$$scope"in e&&n(0,o=e.$$scope)},[o,s]}const _e=class extends ce{constructor(e){super(),ie(this,e,Ue,Qe,i,{})}};function Ee(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ae(e){let t,n,s,o,i,c,a;const l=[Te,He],u=[];function d(e,t){return 0==e[13].questions.length||0!==e[0].currentQuestionIdx&&!e[0].currentQuestionIdx?0:1}t=d(e),n=u[t]=l[t](e);let p=e[1].appHostClientUuid!==e[1].currentClientUuid&&Ke(e);return{c(){n.c(),s=C(),p&&p.c(),o=C(),i=q("img"),M(i,"id","drums"),r(i.src,c="assets/drum.svg")||M(i,"src","assets/drum.svg"),M(i,"alt","Drum icon"),M(i,"class","svelte-1mjscq6")},m(e,n){u[t].m(e,n),b(e,s,n),p&&p.m(e,n),b(e,o,n),b(e,i,n),a=!0},p(e,i){let c=t;t=d(e),t===c?u[t].p(e,i):(J(),X(u[c],1,1,(()=>{u[c]=null})),V(),n=u[t],n?n.p(e,i):(n=u[t]=l[t](e),n.c()),Y(n,1),n.m(s.parentNode,s)),e[1].appHostClientUuid!==e[1].currentClientUuid?p?p.p(e,i):(p=Ke(e),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null)},i(e){a||(Y(n),a=!0)},o(e){X(n),a=!1},d(e){u[t].d(e),e&&v(s),p&&p.d(e),e&&v(o),e&&v(i)}}}function He(e){let t,n,s,o,i,c=e[13].questions[e[0].currentQuestionIdx].text+"",r=e[1].appHostClientUuid===e[1].currentClientUuid&&Re(e);return{c(){t=q("h1"),n=w(c),s=C(),r&&r.c(),o=P(),M(t,"class","svelte-1mjscq6")},m(e,c){b(e,t,c),k(t,n),b(e,s,c),r&&r.m(e,c),b(e,o,c),i=!0},p(e,t){(!i||1&t)&&c!==(c=e[13].questions[e[0].currentQuestionIdx].text+"")&&N(n,c),e[1].appHostClientUuid===e[1].currentClientUuid?r?(r.p(e,t),2&t&&Y(r,1)):(r=Re(e),r.c(),Y(r,1),r.m(o.parentNode,o)):r&&(J(),X(r,1,1,(()=>{r=null})),V())},i(e){i||(Y(r),i=!0)},o(e){X(r),i=!1},d(e){e&&v(t),e&&v(s),r&&r.d(e),e&&v(o)}}}function Te(e){let t,n,s,o,i=e[1].appHostClientUuid===e[1].currentClientUuid&&Se(e);return{c(){t=q("h1"),t.textContent="Wow! You've answered all of the questions!",n=C(),i&&i.c(),s=P(),M(t,"class","svelte-1mjscq6")},m(e,c){b(e,t,c),b(e,n,c),i&&i.m(e,c),b(e,s,c),o=!0},p(e,t){e[1].appHostClientUuid===e[1].currentClientUuid?i?(i.p(e,t),2&t&&Y(i,1)):(i=Se(e),i.c(),Y(i,1),i.m(s.parentNode,s)):i&&(J(),X(i,1,1,(()=>{i=null})),V())},i(e){o||(Y(i),o=!0)},o(e){X(i),o=!1},d(e){e&&v(t),e&&v(n),i&&i.d(e),e&&v(s)}}}function Re(e){let t,n,s,o;return s=new _e({props:{$$slots:{default:[je]},$$scope:{ctx:e}}}),{c(){t=q("div"),n=C(),ne(s.$$.fragment),M(t,"class","gap")},m(e,i){b(e,t,i),b(e,n,i),se(s,e,i),o=!0},p(e,t){const n={};16384&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){o||(Y(s.$$.fragment,e),o=!0)},o(e){X(s.$$.fragment,e),o=!1},d(e){e&&v(t),e&&v(n),oe(s,e)}}}function Oe(t){let n;return{c(){n=q("span"),n.textContent="Next question",M(n,"class","text")},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function je(e){let t,n;return t=new Ne({props:{importance:"primary",$$slots:{default:[Oe]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[10](e[13])})),{c(){ne(t.$$.fragment)},m(e,s){se(t,e,s),n=!0},p(n,s){e=n;const o={};16384&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Se(e){let t,n,s,o;return s=new _e({props:{$$slots:{default:[Le]},$$scope:{ctx:e}}}),{c(){t=q("div"),n=C(),ne(s.$$.fragment),M(t,"class","gap")},m(e,i){b(e,t,i),b(e,n,i),se(s,e,i),o=!0},p(e,t){const n={};16384&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){o||(Y(s.$$.fragment,e),o=!0)},o(e){X(s.$$.fragment,e),o=!1},d(e){e&&v(t),e&&v(n),oe(s,e)}}}function We(t){let n;return{c(){n=q("span"),n.textContent="Restart",M(n,"class","text")},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function ze(t){let n;return{c(){n=q("span"),n.textContent="Pick another question pack",M(n,"class","text")},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function Be(t){let n;return{c(){n=q("span"),n.textContent="Close app",M(n,"class","text")},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function Le(e){let t,n,s,o,i,c;return t=new Ne({props:{importance:"primary",$$slots:{default:[We]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[7](e[13])})),s=new Ne({props:{importance:"secondary",$$slots:{default:[ze]},$$scope:{ctx:e}}}),s.$on("click",e[8]),i=new Ne({props:{importance:"secondary",$$slots:{default:[Be]},$$scope:{ctx:e}}}),i.$on("click",e[9]),{c(){ne(t.$$.fragment),n=C(),ne(s.$$.fragment),o=C(),ne(i.$$.fragment)},m(e,r){se(t,e,r),b(e,n,r),se(s,e,r),b(e,o,r),se(i,e,r),c=!0},p(n,o){e=n;const c={};16384&o&&(c.$$scope={dirty:o,ctx:e}),t.$set(c);const r={};16384&o&&(r.$$scope={dirty:o,ctx:e}),s.$set(r);const a={};16384&o&&(a.$$scope={dirty:o,ctx:e}),i.$set(a)},i(e){c||(Y(t.$$.fragment,e),Y(s.$$.fragment,e),Y(i.$$.fragment,e),c=!0)},o(e){X(t.$$.fragment,e),X(s.$$.fragment,e),X(i.$$.fragment,e),c=!1},d(e){oe(t,e),e&&v(n),oe(s,e),e&&v(o),oe(i,e)}}}function Ke(e){let t,n,s,o,i,c=e[1].clients[e[1].appHostClientUuid]?.clientName+"";return{c(){t=q("div"),n=C(),s=q("p"),o=w(c),i=w(" is the host"),M(t,"class","gap-sm"),M(s,"class","svelte-1mjscq6")},m(e,c){b(e,t,c),b(e,n,c),b(e,s,c),k(s,o),k(s,i)},p(e,t){2&t&&c!==(c=e[1].clients[e[1].appHostClientUuid]?.clientName+"")&&N(o,c)},d(e){e&&v(t),e&&v(n),e&&v(s)}}}function De(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Fe(e){let t,n,s,o={ctx:e,current:null,token:null,hasCatch:!1,pending:De,then:Ae,catch:Ee,value:13,blocks:[,,,]};return Z(n=e[2],o),{c(){t=q("div"),o.block.c(),M(t,"class","game svelte-1mjscq6")},m(e,n){b(e,t,n),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,s=!0},p(t,[n]){ee(o,e=t,n)},i(e){s||(Y(o.block),s=!0)},o(e){for(let e=0;e<3;e+=1)X(o.blocks[e]);s=!1},d(e){e&&v(t),o.block.d(),o.token=null,o=null}}}function Ge(e,t,n){let s,o;u(e,we,(e=>n(1,o=e)));let{state:i}=t,c=E(),r=Pe(i),a=e=>{var t=new Set(s);let n=e.questions.map(((e,t)=>({index:t}))).filter(((e,n)=>!t.has(n))),o=n[Math.floor(Math.random()*n.length)];c("message",{type:"nextQuestionAsked",questionPackId:i.questionPackId,previousQuestionIdxs:s,nextQuestionIdx:null==o?void 0:o.index})},l=e=>{let t=Math.floor(Math.random()*e.questions.length);c("message",{type:"questionsReset",questionPackId:i.questionPackId,nextQuestionIdx:t})},d=()=>c("message",{type:"appClosed"}),p=()=>c("message",{type:"anotherQuestionPackRequested"});return e.$$set=e=>{"state"in e&&n(0,i=e.state)},e.$$.update=()=>{1&e.$$.dirty&&(s=[...i.alreadyAskedQuestionsIdxs,i.currentQuestionIdx])},[i,o,r,a,l,d,p,e=>l(e),()=>p(),()=>d(),e=>a(e)]}const Je=class extends ce{constructor(e){super(),ie(this,e,Ge,Fe,i,{state:0})}};function Ve(e){return new Promise((t=>setTimeout(t,e)))}function Ye(t){return{c:e,m:e,p:e,d:e}}function Xe(e){let t,n,s,o,i,c,r;return{c(){t=q("link"),n=C(),s=q("div"),o=q("span"),i=q("i"),c=C(),r=w(e[0]),M(t,"rel","stylesheet"),M(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"),M(i,"class","fa fa-circle-notch fa-spin"),M(s,"class","center-content")},m(e,a){b(e,t,a),b(e,n,a),b(e,s,a),k(s,o),k(o,i),k(o,c),k(o,r)},p(e,t){1&t&&N(r,e[0])},d(e){e&&v(t),e&&v(n),e&&v(s)}}}function Ze(t){return{c:e,m:e,p:e,d:e}}function et(t){let n,s,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Ze,then:Xe,catch:Ye,value:3};return Z(s=t[1],o),{c(){n=P(),o.block.c()},m(e,t){b(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,[n]){ee(o,t=e,n)},i:e,o:e,d(e){e&&v(n),o.block.d(e),o.token=null,o=null}}}function tt(e,t,n){let{msg:s}=t,{delay:o}=t,i=new Promise(((e,t)=>{setTimeout((()=>e()),o)}));return e.$$set=e=>{"msg"in e&&n(0,s=e.msg),"delay"in e&&n(2,o=e.delay)},[s,i,o]}const nt=class extends ce{constructor(e){super(),ie(this,e,tt,et,i,{msg:0,delay:2})}};function st(t){let n,s,o,i,c,r,a,l,u,d=t[0].name+"";return{c(){n=q("div"),s=q("div"),o=q("i"),c=C(),r=q("div"),a=w(d),M(o,"class",i=h(t[0].icon)+" svelte-wty6dm"),M(s,"class","question-pack-header svelte-wty6dm"),M(r,"class","question-pack-app svelte-wty6dm"),M(n,"class","question-pack svelte-wty6dm")},m(e,i){b(e,n,i),k(n,s),k(s,o),k(n,c),k(n,r),k(r,a),l||(u=I(n,"click",t[1]),l=!0)},p(e,[t]){1&t&&i!==(i=h(e[0].icon)+" svelte-wty6dm")&&M(o,"class",i),1&t&&d!==(d=e[0].name+"")&&N(a,d)},i:e,o:e,d(e){e&&v(n),l=!1,u()}}}function ot(e,t,n){const s=E();let{value:o}=t;return e.$$set=e=>{"value"in e&&n(0,o=e.value)},[o,function(e){s("click",e)}]}const it=class extends ce{constructor(e){super(),ie(this,e,ot,st,i,{value:0})}};function ct(e,t,n){const s=e.slice();return s[12]=t[n],s}function rt(e,t,n){const s=e.slice();return s[12]=t[n],s}function at(t){let n;return{c(){n=q("span"),n.textContent="+ Question pack",M(n,"class","text")},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function lt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ut(e){let t,n,s=e[11],o=[];for(let t=0;t<s.length;t+=1)o[t]=ft(rt(e,s,t));const i=e=>X(o[e],1,1,(()=>{o[e]=null}));let c=null;return s.length||(c=dt()),{c(){t=q("div");for(let e=0;e<o.length;e+=1)o[e].c();c&&c.c(),M(t,"class","question-packs svelte-wlt9df")},m(e,s){b(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);c&&c.m(t,null),n=!0},p(e,n){if(13&n){let r;for(s=e[11],r=0;r<s.length;r+=1){const i=rt(e,s,r);o[r]?(o[r].p(i,n),Y(o[r],1)):(o[r]=ft(i),o[r].c(),Y(o[r],1),o[r].m(t,null))}for(J(),r=s.length;r<o.length;r+=1)i(r);V(),!s.length&&c?c.p(e,n):s.length?c&&(c.d(1),c=null):(c=dt(),c.c(),c.m(t,null))}},i(e){if(!n){for(let e=0;e<s.length;e+=1)Y(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&v(t),x(o,e),c&&c.d()}}}function dt(t){let n;return{c(){n=q("span"),n.textContent="Create your own question pack to make your happy hours more fun.",M(n,"class","placeholder svelte-wlt9df")},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function pt(e){let t;return{c(){t=w("EDIT")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function ft(e){let t,n,s,o;return t=new it({props:{value:e[12]}}),t.$on("click",(function(){return e[6](e[12])})),s=new Ne({props:{importance:"tertiary",$$slots:{default:[pt]},$$scope:{ctx:e}}}),s.$on("click",(function(){return e[7](e[12])})),{c(){ne(t.$$.fragment),n=C(),ne(s.$$.fragment)},m(e,i){se(t,e,i),b(e,n,i),se(s,e,i),o=!0},p(n,o){e=n;const i={};1&o&&(i.value=e[12]),t.$set(i);const c={};131072&o&&(c.$$scope={dirty:o,ctx:e}),s.$set(c)},i(e){o||(Y(t.$$.fragment,e),Y(s.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),X(s.$$.fragment,e),o=!1},d(e){oe(t,e),e&&v(n),oe(s,e)}}}function mt(t){let n,s;return n=new nt({props:{msg:"Loading question packs",delay:20}}),{c(){ne(n.$$.fragment)},m(e,t){se(n,e,t),s=!0},p:e,i(e){s||(Y(n.$$.fragment,e),s=!0)},o(e){X(n.$$.fragment,e),s=!1},d(e){oe(n,e)}}}function $t(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ht(e){let t,n,s=e[11],o=[];for(let t=0;t<s.length;t+=1)o[t]=kt(ct(e,s,t));const i=e=>X(o[e],1,1,(()=>{o[e]=null}));let c=null;return s.length||(c=gt()),{c(){t=q("div");for(let e=0;e<o.length;e+=1)o[e].c();c&&c.c(),M(t,"class","question-packs svelte-wlt9df")},m(e,s){b(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);c&&c.m(t,null),n=!0},p(e,n){if(14&n){let r;for(s=e[11],r=0;r<s.length;r+=1){const i=ct(e,s,r);o[r]?(o[r].p(i,n),Y(o[r],1)):(o[r]=kt(i),o[r].c(),Y(o[r],1),o[r].m(t,null))}for(J(),r=s.length;r<o.length;r+=1)i(r);V(),!s.length&&c?c.p(e,n):s.length?c&&(c.d(1),c=null):(c=gt(),c.c(),c.m(t,null))}},i(e){if(!n){for(let e=0;e<s.length;e+=1)Y(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&v(t),x(o,e),c&&c.d()}}}function gt(t){let n;return{c(){n=q("span"),n.textContent="Apparently, we haven't created our own question packs (yet)"},m(e,t){b(e,n,t)},p:e,d(e){e&&v(n)}}}function yt(e){let t;return{c(){t=w("EDIT")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function kt(e){let t,n,s,o;return t=new it({props:{value:e[12]}}),t.$on("click",(function(){return e[8](e[12])})),s=new Ne({props:{importance:"tertiary",$$slots:{default:[yt]},$$scope:{ctx:e}}}),s.$on("click",(function(){return e[9](e[12])})),{c(){ne(t.$$.fragment),n=C(),ne(s.$$.fragment)},m(e,i){se(t,e,i),b(e,n,i),se(s,e,i),o=!0},p(n,o){e=n;const i={};2&o&&(i.value=e[12]),t.$set(i);const c={};131072&o&&(c.$$scope={dirty:o,ctx:e}),s.$set(c)},i(e){o||(Y(t.$$.fragment,e),Y(s.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),X(s.$$.fragment,e),o=!1},d(e){oe(t,e),e&&v(n),oe(s,e)}}}function bt(t){let n,s;return n=new nt({props:{msg:"Loading question packs",delay:20}}),{c(){ne(n.$$.fragment)},m(e,t){se(n,e,t),s=!0},p:e,i(e){s||(Y(n.$$.fragment,e),s=!0)},o(e){X(n.$$.fragment,e),s=!1},d(e){oe(n,e)}}}function vt(e){let t,n,s,o,i,c,a,l,u,d,p,f,m,$,h,g,y=qe.length<50&&function(e){let t,n;return t=new Ne({props:{size:"small",importance:"primary",$$slots:{default:[at]},$$scope:{ctx:e}}}),t.$on("click",e[5]),{c(){ne(t.$$.fragment)},m(e,s){se(t,e,s),n=!0},p(e,n){const s={};131072&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}(e),x={ctx:e,current:null,token:null,hasCatch:!1,pending:mt,then:ut,catch:lt,value:11,blocks:[,,,]};Z(d=e[0],x);let w={ctx:e,current:null,token:null,hasCatch:!1,pending:bt,then:ht,catch:$t,value:11,blocks:[,,,]};return Z(h=e[1],w),{c(){var e,d;t=q("div"),n=q("div"),s=q("img"),i=C(),c=q("div"),c.innerHTML="<h5>Your icebreakers</h5> \n            <span>Launch your own question pack or create a new one</span>",a=C(),y&&y.c(),l=C(),u=q("div"),x.block.c(),p=C(),f=q("div"),f.innerHTML='<img src="assets/rocket.svg" alt="Recommended icon"/> \n        <div style="flex-grow: 1"><h5>Kosy recommends</h5> \n            <span>Pick one of our custom question packs</span></div>',m=C(),$=q("div"),w.block.c(),r(s.src,o="assets/favorite.svg")||M(s,"src","assets/favorite.svg"),M(s,"alt","Favorite icon"),e=c,d="flex-grow",null==="1"?e.style.removeProperty(d):e.style.setProperty(d,"1",""),M(n,"class","title svelte-wlt9df"),M(u,"class","custom-packs svelte-wlt9df"),M(f,"class","title svelte-wlt9df"),M($,"class","svelte-wlt9df"),M(t,"id","main"),M(t,"class","svelte-wlt9df")},m(e,o){b(e,t,o),k(t,n),k(n,s),k(n,i),k(n,c),k(n,a),y&&y.m(n,null),k(t,l),k(t,u),x.block.m(u,x.anchor=null),x.mount=()=>u,x.anchor=null,k(t,p),k(t,f),k(t,m),k(t,$),w.block.m($,w.anchor=null),w.mount=()=>$,w.anchor=null,g=!0},p(t,[n]){e=t,qe.length<50&&y.p(e,n),x.ctx=e,1&n&&d!==(d=e[0])&&Z(d,x)||ee(x,e,n),w.ctx=e,2&n&&h!==(h=e[1])&&Z(h,w)||ee(w,e,n)},i(e){g||(Y(y),Y(x.block),Y(w.block),g=!0)},o(e){X(y);for(let e=0;e<3;e+=1)X(x.blocks[e]);for(let e=0;e<3;e+=1)X(w.blocks[e]);g=!1},d(e){e&&v(t),y&&y.d(),x.block.d(),x.token=null,x=null,w.block.d(),w.token=null,w=null}}}function xt(e,t,n){let s,o;var i=E();const c=e=>{i("message",{type:"questionPackPicked",questionPackId:e.id,nextQuestionIdx:0})},r=e=>{i("message",{type:"questionPackEditRequested",questionPackId:e.id})},a=()=>{i("message",{type:"questionPackCreationRequested"})};return n(1,s=Promise.all([Ve(2e3),Promise.resolve(qe.filter((e=>e.isPublic)))]).then((e=>e[1]))),n(0,o=Promise.all([Ve(2e3),Promise.resolve(qe.filter((e=>!e.isPublic)))]).then((e=>e[1]))),[o,s,c,r,a,()=>a(),e=>c(e),e=>r(e),e=>c(e),e=>r(e)]}const qt=class extends ce{constructor(e){super(),ie(this,e,xt,vt,i,{})}};function wt(t){let n,s,o,i;return{c(){n=q("div"),s=w("Waiting for "),o=w(t[0]),i=w(" to pick an icebreaker question pack.")},m(e,t){b(e,n,t),k(n,s),k(n,o),k(n,i)},p(e,[t]){1&t&&N(o,e[0])},i:e,o:e,d(e){e&&v(n)}}}function Ct(e,t,n){let{userName:s}=t;return e.$$set=e=>{"userName"in e&&n(0,s=e.userName)},[s]}const Pt=class extends ce{constructor(e){super(),ie(this,e,Ct,wt,i,{userName:0})}};class It{constructor(e){this.id=e.id,this.name=e.name,this.icon=e.icon,this.isPublic=e.isPublic,this.orderNumber=e.orderNumber,this.questions=e.questions.map((e=>new Mt(e)))}toQuestionPack(){return{id:this.id,name:this.name,icon:this.icon,isPublic:this.isPublic,orderNumber:this.orderNumber,questions:this.questions.map((e=>e.question))}}}class Mt{constructor(e){this.id=ye(),this.question=e}}function Nt(e,t,n){const s=e.slice();return s[23]=t[n],s[25]=n,s}function Qt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ut(e){let t,n,s,o;const i=[Et,_t],c=[];function r(e,t){return"questionPackEditor"==e[0].type?0:"questionEditor"==e[0].type?1:-1}return~(t=r(e))&&(n=c[t]=i[t](e)),{c(){n&&n.c(),s=P()},m(e,n){~t&&c[t].m(e,n),b(e,s,n),o=!0},p(e,o){let a=t;t=r(e),t===a?~t&&c[t].p(e,o):(n&&(J(),X(c[a],1,1,(()=>{c[a]=null})),V()),~t?(n=c[t],n?n.p(e,o):(n=c[t]=i[t](e),n.c()),Y(n,1),n.m(s.parentNode,s)):n=null)},i(e){o||(Y(n),o=!0)},o(e){X(n),o=!1},d(e){~t&&c[t].d(e),e&&v(s)}}}function _t(e){let t,n,s,o,i,c,r,a,l,u,d;return a=new _e({props:{$$slots:{default:[Tt]},$$scope:{ctx:e}}}),{c(){t=q("div"),n=q("label"),n.textContent="Question",s=C(),o=q("input"),i=C(),c=q("div"),c.innerHTML='<label for="imageId">Image</label> \n            <input id="imageId" type="text" value="TODO."/>',r=C(),ne(a.$$.fragment),M(n,"for","text"),M(o,"id","text"),M(o,"type","text")},m(p,f){b(p,t,f),k(t,n),k(t,s),k(t,o),Q(o,e[0].question.question.text),b(p,i,f),b(p,c,f),b(p,r,f),se(a,p,f),l=!0,u||(d=I(o,"input",e[17]),u=!0)},p(e,t){1&t&&o.value!==e[0].question.question.text&&Q(o,e[0].question.question.text);const n={};67108864&t&&(n.$$scope={dirty:t,ctx:e}),a.$set(n)},i(e){l||(Y(a.$$.fragment,e),l=!0)},o(e){X(a.$$.fragment,e),l=!1},d(e){e&&v(t),e&&v(i),e&&v(c),e&&v(r),oe(a,e),u=!1,d()}}}function Et(e){let t,n,o,i,c,r,a,l,u,d,p,f,m,$,h,g,y,x,w,P,N,U,_,E=[],A=new Map,H=e[2].questions;const T=e=>e[23].id;for(let t=0;t<H.length;t+=1){let n=Nt(e,H,t),s=T(n);A.set(s,E[t]=Ot(s,n))}const R=[St,jt],O=[];function j(e,t){return e[2].questions.length<50?0:1}return y=j(e),x=O[y]=R[y](e),P=new _e({props:{$$slots:{default:[Kt]},$$scope:{ctx:e}}}),{c(){t=q("fieldset"),n=q("div"),o=q("label"),o.textContent="Name",i=C(),c=q("input"),r=C(),a=q("div"),l=q("label"),l.textContent="Icon",u=C(),d=q("input"),p=C(),f=q("div"),m=q("label"),m.textContent="Questions",$=C(),h=q("ul");for(let e=0;e<E.length;e+=1)E[e].c();g=C(),x.c(),w=C(),ne(P.$$.fragment),M(o,"for","name"),M(c,"id","name"),M(c,"type","text"),M(l,"for","description"),M(d,"id","description"),M(d,"type","text"),M(m,"for","questions"),M(h,"id","questions"),t.disabled=e[1]},m(s,v){b(s,t,v),k(t,n),k(n,o),k(n,i),k(n,c),Q(c,e[2].name),k(t,r),k(t,a),k(a,l),k(a,u),k(a,d),Q(d,e[2].icon),k(t,p),k(t,f),k(f,m),k(f,$),k(f,h);for(let e=0;e<E.length;e+=1)E[e].m(h,null);k(h,g),O[y].m(h,null),k(t,w),se(P,t,null),N=!0,U||(_=[I(c,"input",e[11]),I(d,"input",e[12])],U=!0)},p(e,n){4&n&&c.value!==e[2].name&&Q(c,e[2].name),4&n&&d.value!==e[2].icon&&Q(d,e[2].icon),68&n&&(H=e[2].questions,J(),E=function(e,t,n,s,o,i,c,r,a,l,u,d){let p=e.length,f=i.length,m=p;const $={};for(;m--;)$[e[m].key]=m;const h=[],g=new Map,y=new Map;for(m=f;m--;){const e=d(o,i,m),s=n(e);let r=c.get(s);r?r.p(e,t):(r=l(s,e),r.c()),g.set(s,h[m]=r),s in $&&y.set(s,Math.abs(m-$[s]))}const k=new Set,b=new Set;function v(e){Y(e,1),e.m(r,u),c.set(e.key,e),u=e.first,f--}for(;p&&f;){const t=h[f-1],n=e[p-1],s=t.key,o=n.key;t===n?(u=t.first,p--,f--):g.has(o)?!c.has(s)||k.has(s)?v(t):b.has(o)?p--:y.get(s)>y.get(o)?(b.add(s),v(t)):(k.add(o),p--):(a(n,c),p--)}for(;p--;){const t=e[p];g.has(t.key)||a(t,c)}for(;f;)v(h[f-1]);return h}(E,n,T,0,e,H,A,h,te,Ot,g,Nt),V());let s=y;y=j(e),y===s?O[y].p(e,n):(J(),X(O[s],1,1,(()=>{O[s]=null})),V(),x=O[y],x?x.p(e,n):(x=O[y]=R[y](e),x.c()),Y(x,1),x.m(h,null));const o={};67108864&n&&(o.$$scope={dirty:n,ctx:e}),P.$set(o),(!N||2&n)&&(t.disabled=e[1])},i(e){if(!N){for(let e=0;e<H.length;e+=1)Y(E[e]);Y(x),Y(P.$$.fragment,e),N=!0}},o(e){for(let e=0;e<E.length;e+=1)X(E[e]);X(x),X(P.$$.fragment,e),N=!1},d(e){e&&v(t);for(let e=0;e<E.length;e+=1)E[e].d();O[y].d(),oe(P),U=!1,s(_)}}}function At(e){let t;return{c(){t=w("Save")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Ht(e){let t;return{c(){t=w("Cancel")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Tt(e){let t,n,s,o;return t=new Ne({props:{size:"small",importance:"primary",$$slots:{default:[At]},$$scope:{ctx:e}}}),t.$on("click",e[18]),s=new Ne({props:{size:"small",importance:"secondary",$$slots:{default:[Ht]},$$scope:{ctx:e}}}),s.$on("click",e[19]),{c(){ne(t.$$.fragment),n=C(),ne(s.$$.fragment)},m(e,i){se(t,e,i),b(e,n,i),se(s,e,i),o=!0},p(e,n){const o={};67108864&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};67108864&n&&(i.$$scope={dirty:n,ctx:e}),s.$set(i)},i(e){o||(Y(t.$$.fragment,e),Y(s.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),X(s.$$.fragment,e),o=!1},d(e){oe(t,e),e&&v(n),oe(s,e)}}}function Rt(e){let t;return{c(){t=w("EDIT QUESTION (TODO: style me)")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Ot(e,t){let n,s,o,i,c,r;return c=new Ne({props:{size:"small",importance:"tertiary",$$slots:{default:[Rt]},$$scope:{ctx:t}}}),c.$on("click",(function(){return t[13](t[23],t[25])})),{key:e,first:null,c(){n=q("li"),s=q("input"),i=C(),ne(c.$$.fragment),M(s,"type","text"),s.value=o=t[23].question.text,this.first=n},m(e,t){b(e,n,t),k(n,s),k(n,i),se(c,n,null),r=!0},p(e,n){t=e,(!r||4&n&&o!==(o=t[23].question.text)&&s.value!==o)&&(s.value=o);const i={};67108864&n&&(i.$$scope={dirty:n,ctx:t}),c.$set(i)},i(e){r||(Y(c.$$.fragment,e),r=!0)},o(e){X(c.$$.fragment,e),r=!1},d(e){e&&v(n),oe(c)}}}function jt(e){let t,n,s;return n=new Ne({props:{size:"small",importance:"tertiary",disabled:!0,$$slots:{default:[Wt]},$$scope:{ctx:e}}}),{c(){t=q("li"),ne(n.$$.fragment)},m(e,o){b(e,t,o),se(n,t,null),s=!0},p(e,t){const s={};67108864&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){s||(Y(n.$$.fragment,e),s=!0)},o(e){X(n.$$.fragment,e),s=!1},d(e){e&&v(t),oe(n)}}}function St(e){let t,n,s;return n=new Ne({props:{size:"small",importance:"tertiary",$$slots:{default:[zt]},$$scope:{ctx:e}}}),n.$on("click",e[14]),{c(){t=q("li"),ne(n.$$.fragment)},m(e,o){b(e,t,o),se(n,t,null),s=!0},p(e,t){const s={};67108864&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){s||(Y(n.$$.fragment,e),s=!0)},o(e){X(n.$$.fragment,e),s=!1},d(e){e&&v(t),oe(n)}}}function Wt(e){let t;return{c(){t=w("MAXIMUM QUESTIONS REACHED (TODO: style me)")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function zt(e){let t;return{c(){t=w("ADD QUESTION (TODO: style me)")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Bt(e){let t;return{c(){t=w("Save")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Lt(e){let t;return{c(){t=w("Cancel")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Kt(e){let t,n,s,o;return t=new Ne({props:{size:"small",importance:"primary",$$slots:{default:[Bt]},$$scope:{ctx:e}}}),t.$on("click",e[15]),s=new Ne({props:{size:"small",importance:"secondary",$$slots:{default:[Lt]},$$scope:{ctx:e}}}),s.$on("click",e[16]),{c(){ne(t.$$.fragment),n=C(),ne(s.$$.fragment)},m(e,i){se(t,e,i),b(e,n,i),se(s,e,i),o=!0},p(e,n){const o={};67108864&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};67108864&n&&(i.$$scope={dirty:n,ctx:e}),s.$set(i)},i(e){o||(Y(t.$$.fragment,e),Y(s.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),X(s.$$.fragment,e),o=!1},d(e){oe(t,e),e&&v(n),oe(s,e)}}}function Dt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ft(e){let t,n,s,o={ctx:e,current:null,token:null,hasCatch:!1,pending:Dt,then:Ut,catch:Qt,value:22,blocks:[,,,]};return Z(n=e[3],o),{c(){t=P(),o.block.c()},m(e,n){b(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t,s=!0},p(t,[n]){ee(o,e=t,n)},i(e){s||(Y(o.block),s=!0)},o(e){for(let e=0;e<3;e+=1)X(o.blocks[e]);s=!1},d(e){e&&v(t),o.block.d(e),o.token=null,o=null}}}function Gt(e,t,n){let s,{state:o}=t,i={type:"questionPackEditor"},c=!1,r=E(),a=(async()=>{let e=await("creatingQuestionPack"===o.type?Promise.resolve(null):Pe(o));return n(2,s=new It(null!=e?e:new be)),s})();const l=async()=>{let e=s.toQuestionPack();switch(n(1,c=!0),await(e=>{const t=xe.findIndex((t=>t.id===e.id));return-1===t?xe.push(e):xe[t]=e,(e=>{localStorage.setItem("questionPacks",JSON.stringify({version:1,questionPacks:e}))})(xe),Promise.resolve(!0)})(e),Ce.set(null),n(1,c=!1),o.type){case"creatingQuestionPack":r("message",{type:"questionPackCreated",questionPack:e});case"editingQuestionPack":r("message",{type:"questionPackEdited",questionPack:e})}},u=()=>{r("message",{type:"questionPackEditCancelled"})},d=(e,t)=>{n(0,i={type:"questionEditor",question:Object.assign({},e),index:t})},p=()=>{n(0,i={type:"questionEditor",question:{id:ye(),question:{text:"",imageId:""}},index:s.questions.length})},f=()=>{var e=i;n(2,s.questions[e.index]=e.question,s),n(0,i={type:"questionPackEditor"})},m=()=>{n(0,i={type:"questionPackEditor"})};return e.$$set=e=>{"state"in e&&n(10,o=e.state)},[i,c,s,a,l,u,d,p,f,m,o,function(){s.name=this.value,n(2,s)},function(){s.icon=this.value,n(2,s)},(e,t)=>d(e,t),()=>p(),()=>l(),()=>u(),function(){i.question.question.text=this.value,n(0,i)},()=>f(),()=>m()]}const Jt=class extends ce{constructor(e){super(),ie(this,e,Gt,Ft,i,{state:10})}};function Vt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Yt(e){let t,n,s,o;const i=[nn,tn,en,Zt,Xt],c=[];function r(e,t){return"playingGame"===e[1].type?0:e[0].appHostClientUuid!==e[0].currentClientUuid?1:"pickingQuestionPack"===e[1].type?2:"creatingQuestionPack"===e[1].type?3:"editingQuestionPack"===e[1].type?4:-1}return~(t=r(e))&&(n=c[t]=i[t](e)),{c(){n&&n.c(),s=P()},m(e,n){~t&&c[t].m(e,n),b(e,s,n),o=!0},p(e,o){let a=t;t=r(e),t===a?~t&&c[t].p(e,o):(n&&(J(),X(c[a],1,1,(()=>{c[a]=null})),V()),~t?(n=c[t],n?n.p(e,o):(n=c[t]=i[t](e),n.c()),Y(n,1),n.m(s.parentNode,s)):n=null)},i(e){o||(Y(n),o=!0)},o(e){X(n),o=!1},d(e){~t&&c[t].d(e),e&&v(s)}}}function Xt(e){let t,n;return t=new Jt({props:{state:e[1]}}),t.$on("message",e[7]),{c(){ne(t.$$.fragment)},m(e,s){se(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.state=e[1]),t.$set(s)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Zt(e){let t,n;return t=new Jt({props:{state:e[1]}}),t.$on("message",e[6]),{c(){ne(t.$$.fragment)},m(e,s){se(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.state=e[1]),t.$set(s)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function en(t){let n,s;return n=new qt({}),n.$on("message",t[5]),{c(){ne(n.$$.fragment)},m(e,t){se(n,e,t),s=!0},p:e,i(e){s||(Y(n.$$.fragment,e),s=!0)},o(e){X(n.$$.fragment,e),s=!1},d(e){oe(n,e)}}}function tn(e){let t,n;return t=new Pt({props:{userName:e[0].clients[e[0].appHostClientUuid].clientName}}),{c(){ne(t.$$.fragment)},m(e,s){se(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.userName=e[0].clients[e[0].appHostClientUuid].clientName),t.$set(s)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function nn(e){let t,n;return t=new Je({props:{state:e[1]}}),t.$on("message",e[4]),{c(){ne(t.$$.fragment)},m(e,s){se(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.state=e[1]),t.$set(s)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function sn(t){let n,s;return n=new nt({props:{msg:"Loading icebreaker app",delay:3e3}}),{c(){ne(n.$$.fragment)},m(e,t){se(n,e,t),s=!0},p:e,i(e){s||(Y(n.$$.fragment,e),s=!0)},o(e){X(n.$$.fragment,e),s=!1},d(e){oe(n,e)}}}function on(e){let t,n,s,o={ctx:e,current:null,token:null,hasCatch:!1,pending:sn,then:Yt,catch:Vt,value:15,blocks:[,,,]};return Z(n=e[3],o),{c(){t=q("main"),o.block.c()},m(e,n){b(e,t,n),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,s=!0},p(t,[n]){ee(o,e=t,n)},i(e){s||(Y(o.block),s=!0)},o(e){for(let e=0;e<3;e+=1)X(o.blocks[e]);s=!1},d(e){e&&v(t),o.block.d(),o.token=null,o=null}}}function cn(e,t,n){let s,o;u(e,we,(e=>n(0,s=e))),u(e,ue,(e=>n(1,o=e)));const i=new re({onClientHasJoined:e=>(e=>{we.set(Object.assign(Object.assign({},s),{clients:Object.assign(Object.assign({},s.clients),{[e.clientUuid]:e})}))})(e),onClientHasLeft:e=>(e=>{e===s.appHostClientUuid&&we.set(Object.assign(Object.assign({},s),{appHostClientUuid:s.kosyHostClientUuid})),we.set(Object.assign(Object.assign({},s),{clients:Object.assign(Object.assign({},s.clients),{[e]:void 0})}))})(e),onHostHasChanged:e=>(e=>{we.set(Object.assign(Object.assign({},s),{kosyHostClientUuid:e})),s.clients[s.appHostClientUuid]||we.set(Object.assign(Object.assign({},s),{appHostClientUuid:e}))})(e),onReceiveMessageAsHost:e=>e,onReceiveMessageAsClient:e=>{(async e=>{switch(console.log("Received a message from Kosy: ",e),e.type){case"question-asked":ue.set({type:"playingGame",questionPackId:e.questionPackId,alreadyAskedQuestionsIdxs:e.previousQuestionIdxs,currentQuestionIdx:e.currentQuestionIdx});break;case"questions-reset":ue.set({type:"playingGame",questionPackId:e.questionPackId,alreadyAskedQuestionsIdxs:[],currentQuestionIdx:e.currentQuestionIdx});break;case"pick-question-pack-requested":ue.set({type:"pickingQuestionPack"})}})(e)},onRequestState:()=>o,onProvideState:e=>(e=>{ue.set(e)})(e)});let c=e=>{switch(e.type){case"nextQuestionAsked":i.relayMessage({type:"question-asked",questionPackId:e.questionPackId,previousQuestionIdxs:e.previousQuestionIdxs,currentQuestionIdx:e.nextQuestionIdx});break;case"questionsReset":i.relayMessage({type:"questions-reset",questionPackId:e.questionPackId,currentQuestionIdx:e.nextQuestionIdx});break;case"appClosed":i.stopApp();break;case"questionPackPicked":i.relayMessage({type:"question-asked",questionPackId:e.questionPackId,previousQuestionIdxs:[],currentQuestionIdx:e.nextQuestionIdx});break;case"anotherQuestionPackRequested":i.relayMessage({type:"pick-question-pack-requested"});break;case"questionPackCreationRequested":ue.set({type:"creatingQuestionPack"});break;case"questionPackEditRequested":ue.set({type:"editingQuestionPack",questionPackId:e.questionPackId});break;case"questionPackEdited":case"questionPackCreated":case"questionPackEditCancelled":ue.set({type:"pickingQuestionPack"})}},r=i.startApp().then((e=>{we.set({clients:e.clients,appHostClientUuid:e.initializerClientUuid,kosyHostClientUuid:e.initializerClientUuid,currentClientUuid:e.currentClientUuid}),e.currentAppState&&"loading"!==e.currentAppState.type?ue.set(e.currentAppState):ue.set({type:"pickingQuestionPack"})}));return[s,o,c,r,e=>c(e.detail),e=>c(e.detail),e=>c(e.detail),e=>c(e.detail)]}new class extends ce{constructor(e){super(),ie(this,e,cn,on,i,{})}}({target:document.getElementById("container"),props:{}})})()})();